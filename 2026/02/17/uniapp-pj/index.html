<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>uniapp pj | MShBlog</title><meta name="author" content="Msh"><meta name="copyright" content="Msh"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="购物小程序学习。">
<meta property="og:type" content="article">
<meta property="og:title" content="uniapp pj">
<meta property="og:url" content="https://msh-18751628429.github.io/project/2026/02/17/uniapp-pj/index.html">
<meta property="og:site_name" content="MShBlog">
<meta property="og:description" content="购物小程序学习。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://msh-18751628429.github.io/project/images/cover.jpg">
<meta property="article:published_time" content="2026-02-17T11:20:20.000Z">
<meta property="article:modified_time" content="2026-02-22T08:45:26.022Z">
<meta property="article:author" content="Msh">
<meta property="article:tag" content="笔记">
<meta property="article:tag" content="uniapp">
<meta property="article:tag" content="vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://msh-18751628429.github.io/project/images/cover.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "uniapp pj",
  "url": "https://msh-18751628429.github.io/project/2026/02/17/uniapp-pj/",
  "image": "https://msh-18751628429.github.io/project/images/cover.jpg",
  "datePublished": "2026-02-17T11:20:20.000Z",
  "dateModified": "2026-02-22T08:45:26.022Z",
  "author": [
    {
      "@type": "Person",
      "name": "Msh",
      "url": "https://msh-18751628429.github.io/project"
    }
  ]
}</script><link rel="shortcut icon" href="/project/img/favicon.png"><link rel="canonical" href="https://msh-18751628429.github.io/project/2026/02/17/uniapp-pj/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/project/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/project/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'uniapp pj',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><style>
  /* 黑暗模式代码块全局修复 */
[data-theme="dark"] {
  --highlight-bg: #1e1e1e;
  --highlight-border: #2d2d2d;
  --highlight-color: #d4d4d4;
}

[data-theme="dark"] .highlight,
[data-theme="dark"] pre,
[data-theme="dark"] code.hljs {
  background: var(--highlight-bg) !important;
  border-color: var(--highlight-border) !important;
  color: var(--highlight-color) !important;
}

/* 行号背景 */
[data-theme="dark"] .highlight .gutter {
  background-color: #252526 !important;
  border-right: 1px solid #2d2d2d !important;
}

/* 代码块标题栏 */
[data-theme="dark"] .highlight figcaption {
  background-color: #252526 !important;
  border-bottom: 1px solid #2d2d2d !important;
  color: #ccc !important;
}
  
  #body-wrap .post{
   background: rgba(255, 255, 255, 0.4) !important;
    backdrop-filter: blur(3px);
    
    -webkit-backdrop-filter: blur(2px) saturate(180%);
   
  }
  #card-toc .card-widget{

  background:rgba(255,255,255,0.4)!important;
  }
  /* TOC 项 */
  #aside-content #card-toc .toc-item .toc-link {
    color:#504e4e!important;
  }
  
  /* TOC 激活项 */
  #aside-content #card-toc .toc-item.active .toc-link {
    color:#121212 !important;
    
    background:rgba(255,255,255,0.5)!important;
 
  }
  
  /* TOC 悬停 */
  #aside-content #card-toc .toc-item .toc-link:hover {
    color:#121212 !important;
   background:rgba(255,255,255,0.5)!important;
 
  }
  
  #post{
   background:rgba(255,255,255,0.45)!important;
 
  }
  #recent-posts .recent-post-item > .recent-post-info > .article-title {
    color: #121212!important;}
  #recent-posts .recent-post-item > .recent-post-info > .article-meta-wrap{
    color: #121212!important;}
  #recent-posts .recent-post-item > .recent-post-info > .post-meta-date {
    color: #121212!important;}
  #recent-posts .recent-post-item > .recent-post-info > .content {
    color: #121212!important;}
  /* 卡片背景 */
  #recent-posts .recent-post-item {
  border:1px solid #bbbab175;
  background: rgba(255,255,255,0.5) !important;
    backdrop-filter: blur(3px) !important;
    -webkit-backdrop-filter: blur(1px) !important;}
  #content-inner {
  border:1px solid #bbbab175;
    background-color: rgba(255,255,255,0.5) !important;
  }
  .container pre{
  background: rgba(255, 255, 255,0.55) !important;
  }
   .card-widget {
   color:#121212;
   border:1px solid #bbbab175;
     background:  rgba(255,255,255,0.5) !important;
    backdrop-filter: blur(2px) !important;
    -webkit-backdrop-filter: blur(5px) !important;}
  }
   
  .site-data .headline{
  color:#121212!important;
  }
  .site-data .headline{
  color:#121212!important;
  }
  #aside-content .aside-list > .aside-list-item .content > .title{
  color:rgba(56,165,187)!important;}
  
  .site-data > a .length-num{color:rgba(56,165,187)!important;}

  #aside-content .card-archives ul.card-archive-list > .card-archive-list-item a span{
  color:#504e4e!important;}

  .card-recent-post .aside-list .no-cover .title,.card-recent-post .aside-list .no-cover time{
  color:#121212!important;}

  #aside-content .card-categories ul.card-category-list > .card-category-list-item a span{
  color:#504e4e!important;}
  /* 归档页面卡片样式 */
  #archive{
  background:rgba(255,255,255,0.3);
 
  color:#504e4e!important;
  border:1px solid #bbbab175;
  }
  #archive .article-sort-item-title{color:#504e4e!important;}
  
  
  /* 分类页面卡片样式 */
  #page{
  background: rgba(255,255,255,0.5);
  border:1px solid #bbbab175;
  backdrop-filter: blur(5px) !important;
  color:#504e4e!important;
  }

  /* 标签页面卡片样式 */
  #tag{
  border:1px solid #bbbab175;
  backdrop-filter: blur(5px) !important;
  background: rgba(255,255,255,0.5);
  color:#504e4e!important;
  }
  #nav {
    background: rgba(255, 255, 255, 0.1);
    font-family: 'Georgia', 'Times New Roman', 'Songti SC', serif;
    
  }
   #footer {
    background: rgba(255, 255, 255, 0.5) !important;
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(2px) saturate(180%);
    border-top: 1px solid rgba(255, 255, 255, 0.3);
    color: #333;
    margin-top:30px;
  }
  
 

  .footer-nav {
    font-size: 14px;
    margin: 20px 0;
  }
  .footer-nav a {
    color: #666;
    text-decoration: none;
    margin: 0 10px;
    transition: color 0.3s;
  }
  .footer-nav a:hover {
    color: #3498db;
    text-decoration: underline;
  }
</style>
<meta name="generator" content="Hexo 7.3.0"></head><body><div class="bg-animation" id="web_bg" style="background-image: url(/project/images/bg1.jpeg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/project/images/avatar.jpg" onerror="this.onerror=null;this.src='/project/images/error/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/project/archives/"><div class="headline">文章</div><div class="length-num">5</div></a><a href="/project/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/project/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/project/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/project/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/project/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/project/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/project/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/project/comments/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/project/images/cover.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/project/"><span class="site-name">MShBlog</span></a><a class="nav-page-title" href="/project/"><span class="site-name">uniapp pj</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/project/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/project/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/project/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/project/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/project/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/project/comments/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">uniapp pj</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2026-02-17T11:20:20.000Z" title="发表于 2026-02-17 19:20:20">2026-02-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-22T08:45:26.022Z" title="更新于 2026-02-22 16:45:26">2026-02-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/project/categories/%E5%89%8D%E7%AB%AF/">前端</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/project/categories/%E5%89%8D%E7%AB%AF/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">小程序</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="uniapp-购物小程序"><a href="#uniapp-购物小程序" class="headerlink" title="uniapp-购物小程序"></a>uniapp-购物小程序</h1><h2 id="一、创建uniapp项目"><a href="#一、创建uniapp项目" class="headerlink" title="一、创建uniapp项目"></a>一、创建uniapp项目</h2><ol>
<li><p>下载安装 HBuilderX<br>从 DCloud官网下载适合你系统的版本。<br>如果使用scss&#x2F;sass是需要安装compile-node-sass编译插件的。<br>安装sass插件，需要到HBuilderX插件市场安装。</p>
</li>
<li><p>在HBuilderX新建–&gt;新建项目–&gt;uni-app–&gt;项目名称–&gt;选择模板（uni-ui）–&gt;创建</p>
</li>
<li><p>配置微信小程序<br>manifest.json–微信小程序配置—微信小程序AppID–填入</p>
</li>
<li><p>初始化<br>创建 package.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>
<p>没有 node_modules&#x2F;文件夹 → 需要 npm install</p>
</li>
<li><p>在 HBuilderX 中运行<br>打开项目 → 运行 → 选择运行到相应平台</p>
</li>
</ol>
<p><img src="/project/image.png" alt="alt text"></p>
<ol start="5">
<li>项目目录<br>unishop&#x2F;<br>├── commponents&#x2F;      # 存放<strong>自定义组件</strong>（.vue文件）<br>├── node_modules&#x2F;     # <strong>npm依赖包</strong>，通过 npm install 安装的所有第三方库<br>├── uni_modules&#x2F;      # <strong>uni-app插件市场</strong>的组件&#x2F;插件，通常通过HBuilderX插件市场安装<br>├── pages&#x2F;            # <strong>页面文件目录</strong>，每个页面一个子文件夹，包含.vue&#x2F;.js&#x2F;.json&#x2F;.scss<br>├── static&#x2F;           # <strong>静态资源目录</strong>，如图片、字体、JSON数据文件<br>├── unpackage&#x2F;        # <strong>编译输出目录</strong>，运行&#x2F;打包时生成，包含各平台的小程序&#x2F;H5&#x2F;App代码<br>├── .gitignore        # Git忽略配置文件，指定不上传到Git的文件&#x2F;目录<br>├── subpkg&#x2F;                 # 分包目录<br>│   ├── goods_detail&#x2F;<br>│   │   └── goods_detail.vue<br>│   └── goods_list&#x2F;<br>│       └── goods_list.vue</li>
</ol>
<p>├── App.vue           # <strong>应用根组件</strong>，应用生命周期、全局样式、全局逻辑<br>├── index.html        # <strong>H5网页入口</strong>，仅H5平台使用<br>├── main.js           # <strong>应用入口文件</strong>，初始化Vue实例、注册插件<br>├── manifest.json     # <strong>应用配置文件</strong>，应用名称、图标、启动图、模块权限等<br>├── package.json      # <strong>项目配置文件</strong>，项目信息、依赖包、脚本命令<br>├── package-lock.json # <strong>依赖锁定文件</strong>，确保每次安装的包版本一致<br>├── pages.json        # <strong>页面配置文件</strong>，路由、导航栏样式、底部选项卡<br>└── uni.scss          # <strong>全局样式文件</strong>，可定义SCSS变量，全项目共享</p>
<ol start="6">
<li>关键文件说明</li>
</ol>
<p>pages.json​ - 最重要的路由配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;pages&quot;: [],           // 页面路由</span><br><span class="line">  &quot;globalStyle&quot;: &#123;&#125;,     // 全局样式</span><br><span class="line">  &quot;tabBar&quot;: &#123;&#125;          // 底部选项卡</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>manifest.json​ - 应用多端配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;UniShop&quot;,    // 应用名称</span><br><span class="line">  &quot;appid&quot;: &quot;...&quot;,       // 应用ID</span><br><span class="line">  &quot;description&quot;: &quot;...&quot;, // 应用描述</span><br><span class="line">  &quot;version&quot;: &#123;...&#125;,     // 版本信息</span><br><span class="line">  &quot;mp-weixin&quot;: &#123;...&#125;    // 微信小程序特有配置</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>uni.scss​ - 全局样式变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$uni-color-primary: #007aff;  // 主色调</span><br><span class="line">$uni-text-color: #333;        // 文字颜色</span><br></pre></td></tr></table></figure>

<ol start="7">
<li><p>分包介绍<br><strong>subpkg</strong>是 uni-app 中的 分包（<strong>SubPackages</strong>）配置，主要用于优化小程序的首次加载速度。<br>什么是分包（subpkg）？<br>将小程序划分成多个子包，按需加载：<br>主包：包含启动页面、公共组件、公共资源<br>子包（分包）：包含独立的功能模块，按需下载</p>
</li>
<li><p>分包划分原则：<br>按功能模块划分：user、product、order等<br>按使用频率划分：低频功能放入分包<br>按团队划分：不同团队负责不同分包</p>
</li>
<li><p>大小控制：<br>主包尽量小（&lt; 1.5MB）<br>每个分包合理控制大小<br>公共组件尽量放在主包</p>
</li>
<li><p>资源引用：<br>分包内可以引用自己目录下的组件<br>分包可以引用主包的组件和资源<br>主包不能引用分包的资源<br>TabBar限制：TabBar页面必须在主包中</p>
</li>
<li><p>优势<br>启动更快：首次只加载主包（2MB以内）<br>按需加载：用户访问到分包子页面时才下载<br>并行开发：不同团队开发不同分包</p>
</li>
<li><p>页面跳转方式<br>从主包跳转到分包页面：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 在 pages/home/home.vue 或其他主包页面中</span><br><span class="line">uni.navigateTo(&#123;</span><br><span class="line">  url: &#x27;/subpkg/goods_detail/goods_detail&#x27;  // 注意：路径前有斜杠 /</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<p>从分包页面返回或跳转：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 在 subpkg/goods_detail/goods_detail.vue 中</span><br><span class="line">// 返回首页</span><br><span class="line">uni.switchTab(&#123;</span><br><span class="line">  url: &#x27;/pages/home/home&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 跳转到另一个分包页面</span><br><span class="line">uni.navigateTo(&#123;</span><br><span class="line">  url: &#x27;/subpkg/goods_list/goods_list&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 返回上一页</span><br><span class="line">uni.navigateBack()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="8">
<li>创建.gitignore<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/node_modules</span><br><span class="line">/unpackage/dist</span><br><span class="line">/uni_modules</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="二、配置-HTTP-请求库"><a href="#二、配置-HTTP-请求库" class="headerlink" title="二、配置 HTTP 请求库"></a>二、配置 HTTP 请求库</h2><p>引入第三方请求库 @escook&#x2F;request-miniprogram<br>挂载到 uni.$http全局对象上，所有页面都可使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createSSRApp &#125; from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line"></span><br><span class="line">// 导入并配置 @escook/request-miniprogram 请求库</span><br><span class="line">import &#123;$http&#125; from &#x27;@escook/request-miniprogram&#x27;</span><br><span class="line">uni.$http = $http</span><br><span class="line"></span><br><span class="line">// 配置请求基地址</span><br><span class="line">$http.baseUrl = &#x27;https://your-api.com/api&#x27;</span><br><span class="line"></span><br><span class="line">// 请求拦截器</span><br><span class="line">$http.beforeRequest = function(options) &#123;</span><br><span class="line">  uni.showLoading(&#123;</span><br><span class="line">    title: &#x27;loading...&#x27;,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 响应拦截器</span><br><span class="line">$http.afterRequest = function() &#123;</span><br><span class="line">  uni.hideLoading()</span><br><span class="line">&#125;</span><br><span class="line"> //创建全局工具函数</span><br><span class="line">uni.$showMsg=function(title=&#x27;fail..&#x27;,duration=1500)&#123;</span><br><span class="line">	uni.showToast(&#123;</span><br><span class="line">		title,</span><br><span class="line">		duration,</span><br><span class="line">		icon:&#x27;none&#x27;,</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export function createApp() &#123;</span><br><span class="line">  const app = createSSRApp(App)</span><br><span class="line">  return &#123; app &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="三、创建tabBar页面并提交到仓库"><a href="#三、创建tabBar页面并提交到仓库" class="headerlink" title="三、创建tabBar页面并提交到仓库"></a>三、创建tabBar页面并提交到仓库</h2><ol>
<li><p>在pages中新建页面(home,cate,cart,my)–&gt;页面名称，创建同名目录，使用scss的页面组合式–&gt;创建</p>
</li>
<li><p>在pages.json配置页面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &lt;!-- &quot;pages&quot;数组 - 页面路由配置 --&gt;</span><br><span class="line">  &quot;pages&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;path&quot;: &quot;pages/home/home&quot;,</span><br><span class="line">      &quot;style&quot;: &#123;</span><br><span class="line">        &quot;navigationBarTitleText&quot;: &quot;优购&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &lt;!-- 第一项​ pages/home/home是应用启动页（用户打开小程序看到的第一个页面）</span><br><span class="line">这里配置的都是主包页面，分包页面不在这里配置 --&gt;</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;path&quot;: &quot;pages/cate/cate&quot;,</span><br><span class="line">      &quot;style&quot;: &#123;</span><br><span class="line">        &quot;navigationBarTitleText&quot;: &quot;优购&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;path&quot;: &quot;pages/cart/cart&quot;,</span><br><span class="line">      &quot;style&quot;: &#123;</span><br><span class="line">        &quot;navigationBarTitleText&quot;: &quot;优购&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;path&quot;: &quot;pages/my/my&quot;,</span><br><span class="line">      &quot;style&quot;: &#123;</span><br><span class="line">        &quot;navigationBarTitleText&quot;: &quot;优购&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">  ],</span><br><span class="line">  </span><br><span class="line"> &quot;globalStyle&quot;: &#123;</span><br><span class="line">  &quot;navigationBarTextStyle&quot;: &quot;white&quot;,              // 导航栏文字颜色</span><br><span class="line">  &quot;navigationBarTitleText&quot;: &quot;优购&quot;,               // 导航栏默认标题</span><br><span class="line">  &quot;navigationBarBackgroundColor&quot;: &quot;#C00000&quot;,    // 导航栏背景色（红色）</span><br><span class="line">  &quot;backgroundColor&quot;: &quot;#FFFFFF&quot;,                 // 页面背景色（白色）</span><br><span class="line">  &quot;app-plus&quot;: &#123;</span><br><span class="line">    &quot;background&quot;: &quot;#efeff4&quot;                     // App端背景色（灰色）</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">  &lt;!--  底部选项卡配置----TabBar 页面必须是主包页面--最多 5 个选项卡--页面路径必须已在 pages数组中定义 --&gt;</span><br><span class="line">  &quot;tabBar&quot;: &#123;</span><br><span class="line">    &quot;selectedColor&quot;: &quot;#C00000&quot;,                 // 选中项颜色（红色）</span><br><span class="line">    &quot;list&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;pagePath&quot;: &quot;pages/home/home&quot;,</span><br><span class="line">        &quot;text&quot;: &quot;首页&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;pagePath&quot;: &quot;pages/cate/cate&quot;,</span><br><span class="line">        &quot;text&quot;: &quot;分类&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;pagePath&quot;: &quot;pages/cart/cart&quot;,</span><br><span class="line">        &quot;text&quot;: &quot;购物车&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;pagePath&quot;: &quot;pages/my/my&quot;,</span><br><span class="line">        &quot;text&quot;: &quot;我的&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  &quot;subPackages&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;root&quot;: &quot;subpkg&quot;,</span><br><span class="line">      </span><br><span class="line">      &quot;name&quot;: &quot;goods&quot;,  // 可以给分包起个名字，方便管理</span><br><span class="line"></span><br><span class="line">      &quot;pages&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;path&quot;: &quot;goods_detail/goods_detail&quot;, </span><br><span class="line">          &quot;style&quot;: &#123;</span><br><span class="line">            &quot;navigationBarTitleText&quot;: &quot;商品详情&quot;          // 建议添加标题</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;path&quot;: &quot;goods_list/goods_list&quot;,</span><br><span class="line">          &quot;style&quot;: &#123;</span><br><span class="line">            &quot;navigationBarTitleText&quot;: &quot;商品列表&quot;          // 建议添加标题</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">   &quot;preloadRule&quot;: &#123;</span><br><span class="line">    &quot;pages/home/home&quot;: &#123;</span><br><span class="line">      &quot;network&quot;: &quot;wifi&quot;,</span><br><span class="line">      &quot;packages&quot;: [&quot;subpkg&quot;] </span><br><span class="line">       // 在首页预下载商品分包,这样用户在首页时，如果网络是wifi，就会提前下载商品分包，进入商品页面时几乎没有延迟。</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>将 tabbar分支提交到 Git 仓库：</p>
<ol>
<li><p>查看当前分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure></li>
<li><p>创建 tabbar 分支，切换到 tabbar 分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout tabbar</span><br></pre></td></tr></table></figure></li>
<li><p>查看修改状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure></li>
<li><p>添加所有修改的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure>
</li>
<li><p>提交到本地仓库并写提交信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;添加TabBar功能&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p>推送到远程仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin tabbar</span><br><span class="line"></span><br><span class="line">7. 转到master分支</span><br><span class="line">```bash</span><br><span class="line">git checkout master</span><br></pre></td></tr></table></figure></li>
<li><p>合并tabbar分支并推送到远程仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git merge tabbar</span><br><span class="line">git push</span><br></pre></td></tr></table></figure></li>
<li><p>删除本地分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch -d tabbar           </span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="自定义搜索组件components-my-search-my-search-vue"><a href="#自定义搜索组件components-my-search-my-search-vue" class="headerlink" title="自定义搜索组件components&#x2F;my-search&#x2F;my-search.vue"></a>自定义搜索组件components&#x2F;my-search&#x2F;my-search.vue</h2><p>用户点击搜索框组件–&gt;触发组件根元素的 @click&#x3D;”searchhandler”监听–&gt;执行 searchhandler方法<br>—&gt;该方法通过 $emit(‘click’)告诉父组件：“我被点击了！”,父组件监听点击事件跳转搜索页面</p>
<p>封装性：搜索组件只负责UI展示和基础交互，具体的业务逻辑（如跳转页面）由父组件决定<br>复用性：同一个搜索组件可以在不同页面使用，每个页面可以有不同的点击处理逻辑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;view class=&quot;my-search-container&quot; :style=&quot;&#123;background-color:bgcolor&#125;&quot; @click=&quot;searchhandler&quot;&gt;</span><br><span class="line">		&lt;view class=&quot;my-search-box&quot; :style=&quot;&#123;border-radius:radius+&#x27;px&#x27;&#125;&quot;&gt;</span><br><span class="line">			&lt;!-- 使用uni ui提供的图标 控制大小size--&gt;</span><br><span class="line">			&lt;uni-icons type=&quot;search&quot; size=&quot;17&quot;&gt;&lt;/uni-icons&gt;</span><br><span class="line">			&lt;text class=&quot;placeholder&quot;&gt;search&lt;/text&gt;</span><br><span class="line">		&lt;/view&gt;</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">		name:&quot;my-search&quot;,</span><br><span class="line">		props:&#123;</span><br><span class="line">			// 背景色</span><br><span class="line">			bgcolor:&#123;</span><br><span class="line">				type:String,</span><br><span class="line">				default:&#x27;#c00000&#x27;</span><br><span class="line">			&#125;,</span><br><span class="line">			// 圆角</span><br><span class="line">			radius:&#123;</span><br><span class="line">				type:Number,</span><br><span class="line">				default:18</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		data() &#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;,</span><br><span class="line">		methods:&#123;</span><br><span class="line">			searchhandler()&#123;</span><br><span class="line">				this.$emit(&#x27;click&#x27;)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.my-search-container&#123;</span><br><span class="line">	// background-color: #c00000;</span><br><span class="line">	// 用props属性控制</span><br><span class="line">	height:50px;</span><br><span class="line">	padding:0 10px;</span><br><span class="line">	display:flex;</span><br><span class="line">	align-items:center;</span><br><span class="line">	.my-search-box&#123;</span><br><span class="line">		height:36px;</span><br><span class="line">		background-color: #fff;</span><br><span class="line">		// border-radius:15px;</span><br><span class="line">		width:100%;</span><br><span class="line">		display: flex;</span><br><span class="line">		justify-content:center;</span><br><span class="line">		align-items:center;</span><br><span class="line">		.placeholder&#123;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="搜索页面"><a href="#搜索页面" class="headerlink" title="搜索页面"></a>搜索页面</h2><p>subpkg&#x2F;search&#x2F;search.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;!-- 搜索框 --&gt;</span><br><span class="line">	&lt;view class=&quot;search-box&quot;&gt;</span><br><span class="line">		&lt;uni-search-bar @input=&quot;input&quot; :radius=&quot;100&quot; cancelButton=&quot;none&quot;&gt;&lt;/uni-search-bar&gt;</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">	&lt;!-- 搜素建议列表 --&gt;</span><br><span class="line">	&lt;view class=&quot;sugg-list&quot; v-if=&quot;searchResults.length!==0&quot;&gt;</span><br><span class="line">		&lt;view class=&quot;sugg-item&quot; v-for=&quot;(item,i) in searchResults&quot; :key=&quot;i&quot; @click=&quot;gotoDetail(item)&quot;&gt;</span><br><span class="line">			&lt;view class=&quot;goods-name&quot;&gt;&#123;&#123;item.goods_name&#125;&#125;&lt;/view&gt;</span><br><span class="line">			&lt;uni-icons type=&quot;arrowright&quot; size=&quot;16&quot;&gt;&lt;/uni-icons&gt;</span><br><span class="line">		&lt;/view&gt;</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">	&lt;!-- 搜索历史 --&gt;</span><br><span class="line">	&lt;view class=&quot;history-box&quot; v-else&gt;</span><br><span class="line">		&lt;view class=&quot;history-title&quot;&gt;</span><br><span class="line">			&lt;text&gt;搜索历史&lt;/text&gt;</span><br><span class="line">			&lt;!-- 删除图标 点击垃圾桶图标清空历史 --&gt;</span><br><span class="line">			&lt;uni-icons type=&quot;trash&quot; size=&quot;17&quot; @click=&quot;cleanHistory&quot;&gt;&lt;/uni-icons&gt;</span><br><span class="line">		&lt;/view&gt;</span><br><span class="line">		&lt;view class=&quot;history-list&quot;&gt;</span><br><span class="line">			&lt;!-- 点击历史标签时触发搜索 --&gt;</span><br><span class="line">			&lt;uni-tag :text=&quot;item&quot; v-for=&quot;(item,i) in histories&quot; :key=&quot;i&quot; @click=&quot;gotoGoodsList(item)&quot;&gt;&lt;/uni-tag&gt;</span><br><span class="line">		&lt;/view&gt;</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">		data() &#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				// 防抖，输入间隔时间</span><br><span class="line">				timer: null,</span><br><span class="line">				// search-keyword</span><br><span class="line">				kw: &#x27;&#x27;,</span><br><span class="line">				searchResults: [],</span><br><span class="line">				historyList: []</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		methods: &#123;</span><br><span class="line">			input(e) &#123;</span><br><span class="line">				// 输入框防抖</span><br><span class="line">				console.log(e.value)</span><br><span class="line">				// 清除timer延时器</span><br><span class="line">				clearTimeout(this.timer)</span><br><span class="line">				// 重启一个延时器，并把timeId赋值给this.timer，保存ID（可以取消对应的定时器）</span><br><span class="line">				this.timer = setTimeout(() =&gt; &#123;</span><br><span class="line">					// 500ms内无新输入</span><br><span class="line">					this.kw = e.value</span><br><span class="line">					this.getSearchList()</span><br><span class="line">				&#125;, 500)</span><br><span class="line">			&#125;,</span><br><span class="line">			// 获取搜索列表</span><br><span class="line">			async getSearchList() &#123;</span><br><span class="line">				if (this.kw.length === 0) &#123;</span><br><span class="line">					this.searchResults = []</span><br><span class="line">					return</span><br><span class="line">				&#125;</span><br><span class="line">				const &#123;</span><br><span class="line">					data: res</span><br><span class="line">				&#125; = await uni.$http.get(&#x27;/api/public/v1/goods/qsearch&#x27;, &#123;</span><br><span class="line">					query: this.kw</span><br><span class="line">				&#125;)</span><br><span class="line">				if (res.meta.status !== 200) return uni.$showMsg()</span><br><span class="line">				</span><br><span class="line">				this.searchResults = res.message</span><br><span class="line">				this.saveSearchHistory()</span><br><span class="line">			&#125;,</span><br><span class="line">			gotoDetail(item) &#123;</span><br><span class="line">				uni.navigateTo(&#123;</span><br><span class="line">					url: &#x27;/subpkg/goods_detail/goods_detail?goods_id=&#x27; + item.goods_id</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;,</span><br><span class="line">			// 搜索历史记录</span><br><span class="line">			saveSearchHistory() &#123;</span><br><span class="line">				const set = new Set(this.historyList)</span><br><span class="line">				set.delete(this.kw)</span><br><span class="line">				set.add(this.kw)</span><br><span class="line">				// set对象转数组</span><br><span class="line">				this.historyList = Array.from(set)</span><br><span class="line">				// 数据持久化---存到本地-从本地存储中同步获取键为 &#x27;kw&#x27;的数据</span><br><span class="line">				uni.setStorageSync(&#x27;kw&#x27;, JSON.stringify(this.historyList))</span><br><span class="line">			&#125;,</span><br><span class="line">			// 清空搜索历史记录</span><br><span class="line">			cleanHistory() &#123;</span><br><span class="line">				this.historyList = []</span><br><span class="line">				uni.setStorageSync(&#x27;kw&#x27;, &#x27;[]&#x27;)</span><br><span class="line">			&#125;,</span><br><span class="line">			// 点击搜索关键词跳转商品列表页面</span><br><span class="line">			gotoGoodsList(kw) &#123;</span><br><span class="line">				uni.navigateTo(&#123;</span><br><span class="line">					url: &#x27;/subpkg/goods_list/goods_list?query=&#x27; + kw</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		computed: &#123;</span><br><span class="line">			histories() &#123;</span><br><span class="line">				// 实际存储的历史记录（按时间顺序）</span><br><span class="line">				return [...this.historyList].reverse()</span><br><span class="line">				// 关键字前后顺序-</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		onLoad() &#123;</span><br><span class="line">			</span><br><span class="line">			this.historyList = JSON.parse(uni.getStorageSync(&#x27;kw&#x27;) || &#x27;[]&#x27;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">	/* 吸顶 */</span><br><span class="line">	.search-box &#123;</span><br><span class="line">		position: sticky;</span><br><span class="line">		z-index: 999;</span><br><span class="line">		top: 0;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	.sugg-list &#123;</span><br><span class="line">		padding: 0 5px;</span><br><span class="line"></span><br><span class="line">		.sugg-item &#123;</span><br><span class="line">			font-size: 12px;</span><br><span class="line">			padding: 13px 0;</span><br><span class="line">			border-bottom: 1px solid #efefef;</span><br><span class="line">			display: flex;</span><br><span class="line">			align-items: center;</span><br><span class="line">			justify-content: space-between;</span><br><span class="line"></span><br><span class="line">			.goods-name &#123;</span><br><span class="line">				white-space: nowrap;</span><br><span class="line">				overflow: hidden;</span><br><span class="line">				text-overflow: ellipsis;</span><br><span class="line">				margin-right: 3px;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	.history-box &#123;</span><br><span class="line">		padding: 0 5px;</span><br><span class="line"></span><br><span class="line">		.history-title &#123;</span><br><span class="line">			display: flex;</span><br><span class="line">			height: 40px;</span><br><span class="line">			justify-content: space-between;</span><br><span class="line">			align-items: center;</span><br><span class="line">			font-size: 13px;</span><br><span class="line">			border-bottom: 1px solid #efefef;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		.history-list &#123;</span><br><span class="line">			display: flex;</span><br><span class="line">			flex-wrap: wrap;</span><br><span class="line">			padding-top: 10px;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="home页面"><a href="#home页面" class="headerlink" title="home页面"></a>home页面</h2><p>(对于<strong>uni-app</strong>项目，特别是小程序开发，强烈推荐,使用 <strong>Options API</strong>(稳定、兼容性好、资料多))</p>
<p>home&#x2F;home.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"></span><br><span class="line">	&lt;view class=&quot;search-box&quot;&gt;</span><br><span class="line">		&lt;!-- 自定义搜索组件 --&gt;</span><br><span class="line">		&lt;my-search :bgcolor=&quot;&#x27;#fff&#x27;&quot; :radius=&quot;3&quot; @click=&quot;gotoSearch&quot;&gt;&lt;/my-search&gt;</span><br><span class="line">		</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">  &lt;view&gt;</span><br><span class="line">    &lt;!-- 轮播图 --&gt;</span><br><span class="line">    &lt;swiper :indicator-dots=&quot;true&quot; :autoplay=&quot;true&quot; :interval=&quot;3000&quot; :duration=&quot;1000&quot; :circular=&quot;true&quot;&gt;</span><br><span class="line">      &lt;swiper-item v-for=&quot;(item, i) in swiperList&quot; :key=&quot;i&quot;&gt;</span><br><span class="line">        &lt;navigator class=&quot;swiper-item&quot; :url=&quot;&#x27;/subpkg/goods_detail/goods_detail?goods_id=&#x27; + item.goods_id&quot;&gt;</span><br><span class="line">          &lt;image :src=&quot;item.image_src&quot;&gt;&lt;/image&gt;</span><br><span class="line">        &lt;/navigator&gt;</span><br><span class="line">      &lt;/swiper-item&gt;</span><br><span class="line">    &lt;/swiper&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 分类导航 --&gt;</span><br><span class="line">    &lt;view class=&quot;nav-list&quot;&gt;</span><br><span class="line">      &lt;view class=&quot;nav-item&quot; v-for=&quot;(item, i) in navList&quot; :key=&quot;i&quot; @click=&quot;navClickHandler(item)&quot;&gt;</span><br><span class="line">        &lt;image :src=&quot;item.image_src&quot; class=&quot;nav-img&quot;&gt;&lt;/image&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 楼层数据区 --&gt;</span><br><span class="line">    &lt;view class=&quot;floor-list&quot;&gt;</span><br><span class="line">      &lt;view class=&quot;floor-item&quot; v-for=&quot;(item, i) in floorList&quot; :key=&quot;i&quot;&gt;</span><br><span class="line">        &lt;!-- 楼层标题 --&gt;</span><br><span class="line">        &lt;image :src=&quot;item.floor_title.image_src&quot; class=&quot;floor-title&quot;&gt;&lt;/image&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;!-- 楼层图片区 --&gt;</span><br><span class="line">        &lt;view class=&quot;floor-img-box&quot;&gt;</span><br><span class="line">          &lt;!-- 左侧大图 --&gt;</span><br><span class="line">          &lt;navigator class=&quot;left-img-box&quot; :url=&quot;item.product_list[0].url&quot;&gt;</span><br><span class="line">            &lt;image </span><br><span class="line">              :src=&quot;item.product_list[0].image_src&quot; </span><br><span class="line">              :style=&quot;&#123; width: item.product_list[0].image_width + &#x27;rpx&#x27; &#125;&quot; </span><br><span class="line">              mode=&quot;widthFix&quot;&gt;</span><br><span class="line">            &lt;/image&gt;</span><br><span class="line">          &lt;/navigator&gt;</span><br><span class="line">          </span><br><span class="line">          &lt;!-- 右侧图片 --&gt;</span><br><span class="line">          &lt;view class=&quot;right-img-box&quot;&gt;</span><br><span class="line">            &lt;navigator </span><br><span class="line">              class=&quot;right-img-item&quot; </span><br><span class="line">              v-for=&quot;(item2, i2) in item.product_list&quot; </span><br><span class="line">              v-if=&quot;i2!==0&quot; </span><br><span class="line">              :key=&quot;i2&quot;</span><br><span class="line">              :url=&quot;item2.url&quot;&gt;</span><br><span class="line">              &lt;image </span><br><span class="line">                :src=&quot;item2.image_src&quot; </span><br><span class="line">                :style=&quot;&#123; width: item2.image_width + &#x27;rpx&#x27; &#125;&quot; </span><br><span class="line">                mode=&quot;widthFix&quot;&gt;</span><br><span class="line">              &lt;/image&gt;</span><br><span class="line">            &lt;/navigator&gt;</span><br><span class="line">          &lt;/view&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      swiperList: [],</span><br><span class="line">      navList: [],</span><br><span class="line">      floorList: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad() &#123;</span><br><span class="line">    this.getSwiperList()</span><br><span class="line">    this.getNavList()</span><br><span class="line">    this.getFloorList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getSwiperList() &#123;</span><br><span class="line">      try &#123;</span><br><span class="line">        const &#123; data: res &#125; = await uni.$http.get(&#x27;/api/public/v1/home/swiperdata&#x27;)</span><br><span class="line">        if (res.meta.status !== 200) &#123;</span><br><span class="line">          uni.$showMsg(&#x27;获取轮播图失败&#x27;)</span><br><span class="line">          return</span><br><span class="line">        &#125;</span><br><span class="line">        this.swiperList = res.message</span><br><span class="line">      &#125; catch (error) &#123;</span><br><span class="line">        uni.$showMsg(&#x27;网络请求失败&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    async getNavList() &#123;</span><br><span class="line">      try &#123;</span><br><span class="line">        const &#123; data: res &#125; = await uni.$http.get(&#x27;/api/public/v1/home/catitems&#x27;)</span><br><span class="line">        if (res.meta.status !== 200) &#123;</span><br><span class="line">          uni.$showMsg(&#x27;获取分类导航失败&#x27;)</span><br><span class="line">          return</span><br><span class="line">        &#125;</span><br><span class="line">        this.navList = res.message</span><br><span class="line">      &#125; catch (error) &#123;</span><br><span class="line">        uni.$showMsg(&#x27;网络请求失败&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    async getFloorList() &#123;</span><br><span class="line">      try &#123;</span><br><span class="line">        const &#123; data: res &#125; = await uni.$http.get(&#x27;/api/public/v1/home/floordata&#x27;)</span><br><span class="line">        if (res.meta.status !== 200) &#123;</span><br><span class="line">          uni.$showMsg(&#x27;获取楼层数据失败&#x27;)</span><br><span class="line">          return</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        res.message.forEach(floor =&gt; &#123;</span><br><span class="line">          floor.product_list.forEach(prod =&gt; &#123;</span><br><span class="line">            const params = prod.navigator_url.split(&#x27;?&#x27;)[1] || &#x27;&#x27;</span><br><span class="line">            prod.url = &#x27;/subpkg/goods_list/goods_list?&#x27; + params</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        </span><br><span class="line">        this.floorList = res.message</span><br><span class="line">      &#125; catch (error) &#123;</span><br><span class="line">        uni.$showMsg(&#x27;网络请求失败&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    navClickHandler(item) &#123;</span><br><span class="line">      if (item.name === &#x27;分类&#x27;) &#123;</span><br><span class="line">        uni.switchTab(&#123;</span><br><span class="line">          url: &#x27;/pages/cate/cate&#x27;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        uni.$showMsg(`跳转到: $&#123;item.name&#125;`)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    gotoSearch()&#123;</span><br><span class="line">        uni.navgateTo(&#123;</span><br><span class="line">          url:&#x27;/subpkg/search/search&#x27;</span><br><span class="line">        &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">swiper&#123;</span><br><span class="line">	height:300rpx;</span><br><span class="line">	.swiper-item,</span><br><span class="line">	image&#123;</span><br><span class="line">		width:100%;</span><br><span class="line">		height:100%;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">.nav-list&#123;</span><br><span class="line">	display:flex;</span><br><span class="line">	justify-content:space-around;</span><br><span class="line">	margin:15px 0;</span><br><span class="line">	</span><br><span class="line">	.nav-img&#123;</span><br><span class="line">		width:128rpx;</span><br><span class="line">		height:140rpx;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">.floor-title&#123;</span><br><span class="line">	height:60rpx;</span><br><span class="line">	width:100%;</span><br><span class="line">	display:flex;</span><br><span class="line">&#125;</span><br><span class="line">.right-img-box&#123;</span><br><span class="line">	display:flex;</span><br><span class="line">	flex-wrap:wrap;</span><br><span class="line">	justify-content:space-around;</span><br><span class="line">&#125;</span><br><span class="line">.floor-img-box&#123;</span><br><span class="line">	dispaly:flex;</span><br><span class="line">	padding-left:15rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const params = prod.navigator_url.split(&#x27;?&#x27;)[1] || &#x27;&#x27;</span><br><span class="line">prod.url = &#x27;/subpkg/goods_list/goods_list?&#x27; + params</span><br></pre></td></tr></table></figure>
<p> 遍历楼层数据中的每个商品，重新构建跳转URL,处理商品链接，将其转换为 UniApp 可用的页面跳转路径<br>原始 navigator_url 格式示例：&#x2F;pages&#x2F;goods_list&#x2F;index?query&#x3D;xxx<br>处理后变成：&#x2F;subpkg&#x2F;goods_list&#x2F;goods_list?query&#x3D;xxx<br>子包分包优化：<br>很多项目会把商品列表页面放在子包(subpackages)中，减少主包体积<br>‘&#x2F;subpkg&#x2F;goods_list&#x2F;goods_list’表示这是子包下的页面路径<br>参数提取：<br>prod.navigator_url.split(‘?’)[1]获取URL中的查询参数–使用 split(‘?’) 将字符串按问号分割成数组,取索引为 1 的部分（即数组第二个元素）<br>比如 ?id&#x3D;123&amp;type&#x3D;1这样的参数</p>
<h3 id="创建home分支提交到仓库-同tabbar"><a href="#创建home分支提交到仓库-同tabbar" class="headerlink" title="创建home分支提交到仓库(同tabbar)"></a>创建home分支提交到仓库(同tabbar)</h3><h2 id="cate页面"><a href="#cate页面" class="headerlink" title="cate页面"></a>cate页面</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;view&gt;</span><br><span class="line">		&lt;view class=&quot;search-box&quot;&gt;</span><br><span class="line">		&lt;!-- 自定义搜索组件 --&gt;</span><br><span class="line">		&lt;my-search :bgcolor=&quot;&#x27;#fff&#x27;&quot; :radius=&quot;3&quot; @click=&quot;gotoSearch&quot;&gt;&lt;/my-search&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;view class=&quot;scroll-view-container&quot;&gt;</span><br><span class="line">			&lt;!-- 左侧滚动视图区 --&gt;</span><br><span class="line">			&lt;scroll-view class=&quot;left-scroll-view&quot; scroll-y :style=&quot;&#123;height: wh + &#x27;px&#x27;&#125;&quot;&gt;</span><br><span class="line">				&lt;block v-for=&quot;(item, i) in cateList&quot; :key=&quot;i&quot;&gt;</span><br><span class="line">					&lt;view </span><br><span class="line">						:class=&quot;[&#x27;left-scroll-view-item&#x27;, i === active ? &#x27;active&#x27; : &#x27;&#x27;]&quot; </span><br><span class="line">						@click=&quot;activeChanged(i)&quot;</span><br><span class="line"></span><br><span class="line">						&lt;!-- 这个 i是 闭包中的局部变量，每个列表项都有自己独立的 i值。</span><br><span class="line">						 i的来源：v-for=&quot;(item, i) in array&quot;中的第二个参数</span><br><span class="line">          传递原理：每个列表项都有自己的闭包，捕获了当前的 i值</span><br><span class="line">          使用场景：需要通过索引来定位和操作数组元素时 --&gt;</span><br><span class="line">					&gt;</span><br><span class="line">						&#123;&#123;item.cate_name&#125;&#125;</span><br><span class="line">					&lt;/view&gt;</span><br><span class="line">				&lt;/block&gt;</span><br><span class="line">			&lt;/scroll-view&gt;</span><br><span class="line">			&lt;!-- 右侧滚动视图区 --&gt;</span><br><span class="line">			&lt;scroll-view </span><br><span class="line">				class=&quot;right-scroll-view&quot; </span><br><span class="line">				scroll-y </span><br><span class="line">				:style=&quot;&#123;height: wh + &#x27;px&#x27;&#125;&quot; </span><br><span class="line">				:scroll-top=&quot;scrollTop&quot;</span><br><span class="line">			&gt;</span><br><span class="line">				&lt;view class=&quot;cate-lv2&quot; v-for=&quot;(item2, i2) in cateLevel2&quot; :key=&quot;i2&quot;&gt;</span><br><span class="line">					&lt;!-- 二级分类标题 --&gt;</span><br><span class="line">					&lt;view class=&quot;cate-lv2-title&quot;&gt;&#123;&#123;item2.cat_name&#125;&#125;&lt;/view&gt;</span><br><span class="line">					&lt;!-- 当前二级分类下的三级分类列表 --&gt;</span><br><span class="line">					&lt;view class=&quot;cate-lv3-list&quot;&gt;</span><br><span class="line">						&lt;!-- 三级分类item---绑定点击跳转事件 --&gt;</span><br><span class="line">						&lt;view </span><br><span class="line">							class=&quot;cate-lv3-item&quot; </span><br><span class="line">							v-for=&quot;(item3, i3) in item2.children&quot; </span><br><span class="line">							:key=&quot;i3&quot; </span><br><span class="line">							@click=&quot;gotoGoodsList(item3)&quot;</span><br><span class="line">						&gt;</span><br><span class="line">							&lt;!-- 三级分类的图片 --&gt;</span><br><span class="line">							&lt;image :src=&quot;item3.cat_icon&quot;&gt;&lt;/image&gt;</span><br><span class="line">							&lt;text&gt;&#123;&#123;item3.cat_name&#125;&#125;&lt;/text&gt;</span><br><span class="line">						&lt;/view&gt;</span><br><span class="line">					&lt;/view&gt;</span><br><span class="line">				&lt;/view&gt;</span><br><span class="line">			&lt;/scroll-view&gt;</span><br><span class="line">		&lt;/view&gt;</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 导出 Vue 组件</span><br><span class="line">export default &#123;</span><br><span class="line">  // data 函数：定义组件的响应式数据</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      wh: 0,           // 窗口高度（用于计算滚动区域高度）</span><br><span class="line">      active: 0,       // 当前选中的一级分类索引</span><br><span class="line">      cateList: [],    // 一级分类列表</span><br><span class="line">      cateLevel2: [],  // 当前选中一级分类的二级分类列表</span><br><span class="line">      scrollTop: 0     // 右侧滚动区域的位置（用于触发重新渲染）</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  // methods 对象：定义组件的方法</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // 异步获取分类列表数据</span><br><span class="line">    async getCateList() &#123;</span><br><span class="line">      try &#123;</span><br><span class="line">        // 发送 GET 请求获取分类数据</span><br><span class="line">        // 解构赋值：res = response.data</span><br><span class="line">        const &#123; data: res &#125; = await uni.$http.get(&#x27;/api/public/v1/categories&#x27;)</span><br><span class="line">        </span><br><span class="line">        // 检查响应状态码</span><br><span class="line">        if (res.meta.status !== 200) &#123;</span><br><span class="line">          uni.$showMsg()  // 显示错误提示</span><br><span class="line">          return          // 终止函数执行</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // 请求成功：将数据存储到响应式变量中</span><br><span class="line">        this.cateList = res.message  // 所有一级分类  </span><br><span class="line"></span><br><span class="line">        &lt;!-- </span><br><span class="line">        // 1. 页面加载时，需要有一个默认的选中项</span><br><span class="line">          // 2. 通常默认选中第一个分类（索引 0）</span><br><span class="line">          this.active = 0  // 默认选中第一个</span><br><span class="line"></span><br><span class="line">          // 3. 既然默认选中第一个，那么右侧就应该显示第一个分类的二级分类</span><br><span class="line">          this.cateLevel2 = res.message[0]?.children || [] </span><br><span class="line">         设置默认显示的二级分类（第一个一级分类的children）</span><br><span class="line">         可选链操作符 ?.：防止 res.message[0] 为 undefined</span><br><span class="line">          空值合并 || []：如果 children 不存在，使用空数组</span><br><span class="line">        --&gt;</span><br><span class="line"></span><br><span class="line">        this.cateLevel2 = res.message[0]?.children || []</span><br><span class="line">      &#125; catch (error) &#123;</span><br><span class="line">        // 捕获请求过程中的异常（如网络错误）</span><br><span class="line">        console.error(&#x27;获取分类列表失败:&#x27;, error)</span><br><span class="line">        uni.$showMsg(&#x27;网络请求失败&#x27;)  // 显示自定义错误消息</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    // 处理一级分类点击事件</span><br><span class="line">    activeChanged(i) &#123;</span><br><span class="line">      this.active = i  // 更新当前选中项的索引</span><br><span class="line">      </span><br><span class="line">      // 根据选中的一级分类，更新二级分类数据</span><br><span class="line">      this.cateLevel2 = this.cateList[i]?.children || []</span><br><span class="line">      </span><br><span class="line">      // 技巧：通过改变 scrollTop 的值（0↔1）强制右侧区域重新渲染</span><br><span class="line">      // 解决 uni-app 中 scroll-view 在某些情况下不重新渲染的问题</span><br><span class="line">      this.scrollTop = this.scrollTop === 0 ? 1 : 0</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    // 跳转到商品列表页（点击三级分类时触发）</span><br><span class="line">    gotoGoodsList(item) &#123;</span><br><span class="line">      // uni-app 的页面跳转方法</span><br><span class="line">      uni.navigateTo(&#123;</span><br><span class="line">        // 携带参数：分类ID</span><br><span class="line">        url: &#x27;/subpkg/goods_list/goods_list?cid=&#x27; + item.cat_id</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    // 跳转到搜索页</span><br><span class="line">    gotoSearch() &#123;</span><br><span class="line">      uni.navigateTo(&#123;</span><br><span class="line">        url: &#x27;/subpkg/search/search&#x27;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  // 生命周期钩子：页面加载时执行</span><br><span class="line">  onLoad() &#123;</span><br><span class="line">    // 获取系统信息（屏幕高度等）</span><br><span class="line">    const sysInfo = uni.getSystemInfoSync()</span><br><span class="line">    </span><br><span class="line">    // 计算滚动区域高度 = 窗口高度 - 搜索框高度（假设50px）</span><br><span class="line">    this.wh = sysInfo.windowHeight - 50</span><br><span class="line">    </span><br><span class="line">    // 页面加载完成后立即获取分类数据</span><br><span class="line">    this.getCateList()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.scroll-view-container &#123;</span><br><span class="line">	display: flex;</span><br><span class="line">	</span><br><span class="line">	.left-scroll-view &#123;</span><br><span class="line">		width: 120px;</span><br><span class="line">		</span><br><span class="line">		.left-scroll-view-item &#123;</span><br><span class="line">			background-color: #f7f7f7;</span><br><span class="line">			line-height: 60px;</span><br><span class="line">			text-align: center;</span><br><span class="line">			font-size: 12px;</span><br><span class="line">			position: relative;</span><br><span class="line">			</span><br><span class="line">			&amp;.active &#123;</span><br><span class="line">				background-color: #ffffff;</span><br><span class="line">				font-weight: bold;</span><br><span class="line">				color: #c00000;</span><br><span class="line">				</span><br><span class="line">				&amp;::before &#123;</span><br><span class="line">					content: &#x27;&#x27;;</span><br><span class="line">					display: block;</span><br><span class="line">					width: 3px;</span><br><span class="line">					height: 30px;</span><br><span class="line">					background-color: #c00000;</span><br><span class="line">					position: absolute;</span><br><span class="line">					top: 50%;</span><br><span class="line">					left: 0;</span><br><span class="line">					transform: translateY(-50%);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	.right-scroll-view &#123;</span><br><span class="line">		flex: 1;</span><br><span class="line">		</span><br><span class="line">		.cate-lv2-title &#123;</span><br><span class="line">			font-size: 14px;</span><br><span class="line">			font-weight: bold;</span><br><span class="line">			text-align: center;</span><br><span class="line">			padding: 15px 0;</span><br><span class="line">			background-color: #f7f7f7;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		.cate-lv3-list &#123;</span><br><span class="line">			display: flex;</span><br><span class="line">			flex-wrap: wrap;</span><br><span class="line">			padding: 10px;</span><br><span class="line">			</span><br><span class="line">			.cate-lv3-item &#123;</span><br><span class="line">				display: flex;</span><br><span class="line">				flex-direction: column;</span><br><span class="line">				width: 33.3%;</span><br><span class="line">				justify-content: center;</span><br><span class="line">				align-items: center;</span><br><span class="line">				padding: 10px 0;</span><br><span class="line">				box-sizing: border-box;</span><br><span class="line">				</span><br><span class="line">				image &#123;</span><br><span class="line">					width: 60px;</span><br><span class="line">					height: 60px;</span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">				text &#123;</span><br><span class="line">					font-size: 12px;</span><br><span class="line">					margin-top: 5px;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>api数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;message&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;cat_id&quot;: 1,</span><br><span class="line">      &quot;cat_name&quot;: &quot;手机数码&quot;,</span><br><span class="line">      &quot;children&quot;: [</span><br><span class="line">        &#123; &quot;cat_id&quot;: 11, &quot;cat_name&quot;: &quot;手机通讯&quot; &#125;,</span><br><span class="line">        &#123; &quot;cat_id&quot;: 12, &quot;cat_name&quot;: &quot;运营商&quot; &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;cat_id&quot;: 2,</span><br><span class="line">      &quot;cat_name&quot;: &quot;家用电器&quot;,</span><br><span class="line">      &quot;children&quot;: [</span><br><span class="line">        &#123; &quot;cat_id&quot;: 21, &quot;cat_name&quot;: &quot;电视&quot; &#125;,</span><br><span class="line">        &#123; &quot;cat_id&quot;: 22, &quot;cat_name&quot;: &quot;空调&quot; &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="创建components-my-goods-my-goods-vue"><a href="#创建components-my-goods-my-goods-vue" class="headerlink" title="创建components&#x2F;my-goods&#x2F;my-goods.vue"></a>创建components&#x2F;my-goods&#x2F;my-goods.vue</h2><p>商品信息展示<br>商品图片展示：显示商品缩略图，支持网络图片和默认占位图<br>商品名称显示：显示商品标题，支持两行文本省略显示<br>商品价格显示：格式化显示商品价格，保留两位小数<br>2. 智能图片处理<br>自动容错：当商品图片地址为空时，自动显示默认图片<br>比例保持：使用 mode&#x3D;”aspectFit”保持图片原始比例不拉伸变形<br>占位图：预置占位图片，防止空白显示<br>3. 数据格式化<br>价格格式化：使用 Vue 过滤器将价格格式化为标准货币格式<br>例如：19.9→ ￥19.90<br>自动处理非数字输入，确保显示一致性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;view class=&quot;goods-item&quot;&gt;</span><br><span class="line">		&lt;!-- 左侧图片 --&gt;</span><br><span class="line">		&lt;view class=&quot;goods-item-left&quot;&gt;</span><br><span class="line">			&lt;image :src=&quot;goods.goods_small_logo || defaultPic&quot; class=&quot;goods-pic&quot; mode=&quot;aspectFit&quot;&gt;&lt;/image&gt;</span><br><span class="line">		&lt;!-- &lt;!-- </span><br><span class="line">				:src 绑定图片地址，使用逻辑或运算符</span><br><span class="line">				- 如果 goods.goods_small_logo 存在，使用该地址</span><br><span class="line">				- 否则使用默认图片 defaultPic</span><br><span class="line">				mode=&quot;aspectFit&quot; 保持图片比例完整显示</span><br><span class="line">			--&gt; --&gt;</span><br><span class="line">		&lt;/view&gt;</span><br><span class="line">		&lt;!-- 右侧信息 --&gt;</span><br><span class="line">		&lt;view class=&quot;goods-item-right&quot;&gt;</span><br><span class="line">			&lt;view class=&quot;goods-name&quot;&gt;&#123;&#123;goods.goods_name&#125;&#125;&lt;/view&gt;</span><br><span class="line">			&lt;view class=&quot;goods-info-box&quot;&gt;</span><br><span class="line">				&lt;view class=&quot;goods-price&quot;&gt;￥&#123;&#123;goods.goods_price | tofixed&#125;&#125;&lt;/view&gt;</span><br><span class="line">			&lt;!-- 使用 tofixed 过滤器格式化价格为两位小数 --&gt;</span><br><span class="line">			&lt;/view&gt;</span><br><span class="line">		&lt;/view&gt;</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">		name:&quot;my-goods&quot;,  // 组件名称</span><br><span class="line">		</span><br><span class="line">		filters:&#123;  // 自定义过滤器，用于数据格式化</span><br><span class="line">			tofixed(num)&#123;  // 价格格式化过滤器</span><br><span class="line">				return Number(num).toFixed(2)  // 转换为数字并保留两位小数</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		</span><br><span class="line">		props:&#123;  // 接收父组件传递的数据</span><br><span class="line">			goods:&#123;</span><br><span class="line">				type:Object,  // 必须是对象类型</span><br><span class="line">				default:() =&gt; (&#123;&#125;)  // 默认值为空对象，使用函数返回避免引用问题</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		</span><br><span class="line">		data() &#123;  // 组件内部数据</span><br><span class="line">			return &#123;</span><br><span class="line">				defaultPic:&#x27;https://via.placeholder.com/100x100&#x27;  // 默认图片地址</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.goods-item&#123;</span><br><span class="line">	display:flex;</span><br><span class="line">	padding:10px 15px;</span><br><span class="line">	border-bottom:1px solid #f0f0f0;</span><br><span class="line">	.goods-item-left&#123;</span><br><span class="line">		margin-right:10px;</span><br><span class="line">		.goods-pic&#123;</span><br><span class="line">			width:100px;</span><br><span class="line">			height:100px;</span><br><span class="line">			display:block;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	.goods-item-right&#123;</span><br><span class="line">		flex:1;</span><br><span class="line">		display:flex;</span><br><span class="line">		flex-direction:column;</span><br><span class="line">		justify-content:space-between;</span><br><span class="line">		.goods-name&#123;</span><br><span class="line">			font-size:14px;</span><br><span class="line">			color:#333;</span><br><span class="line">			line-height:1.4;</span><br><span class="line">			display:-webkit-box;</span><br><span class="line">			-webkit-box-orient:vertical;</span><br><span class="line">			-webkit-line-clamp:2;</span><br><span class="line">			overflow:hidden;</span><br><span class="line">		&#125;</span><br><span class="line">		.goods-price&#123;</span><br><span class="line">			font-size:18px;</span><br><span class="line">			color:#c00000;</span><br><span class="line">			font-weight:bold;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="subpkg-goods-list-goods-list-vue"><a href="#subpkg-goods-list-goods-list-vue" class="headerlink" title="subpkg&#x2F;goods_list&#x2F;goods_list.vue"></a>subpkg&#x2F;goods_list&#x2F;goods_list.vue</h2><p>分页加载：上拉触底自动加载下一页数据<br>下拉刷新：下拉页面可刷新数据<br>数据防抖：通过isloading防止重复请求<br>条件渲染：根据页码判断是替换还是追加数据<br>错误处理：网络错误和API错误都有相应处理<br>页面跳转：点击商品跳转到详情页<br>参数传递：支持搜索关键词和分类ID筛选</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;view&gt;</span><br><span class="line">		&lt;!-- 商品列表容器 --&gt;</span><br><span class="line">		&lt;view class=&quot;goods-list&quot;&gt;</span><br><span class="line">			&lt;!-- 遍历商品列表 --&gt;</span><br><span class="line">			&lt;!-- goods: 当前商品对象 --&gt;</span><br><span class="line">			&lt;!-- i: 索引值，用于key属性 --&gt;</span><br><span class="line">			&lt;view v-for=&quot;(goods,i) in goodsList&quot; :key=&quot;i&quot; @click=&quot;gotoDetail(goods)&quot;&gt;</span><br><span class="line">				&lt;!-- 使用自定义商品组件 --&gt;</span><br><span class="line">				&lt;my-goods :goods=&quot;goods&quot;&gt;&lt;/my-goods&gt;</span><br><span class="line">			&lt;/view&gt;</span><br><span class="line">		&lt;/view&gt;</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default&#123;</span><br><span class="line">		data()&#123;</span><br><span class="line">			return&#123;</span><br><span class="line">				// 节流阀 - 防止重复请求</span><br><span class="line">				isloading:false,</span><br><span class="line">				// 请求参数对象</span><br><span class="line">				queryObj:&#123;</span><br><span class="line">					query:&#x27;&#x27;,      // 搜索关键词</span><br><span class="line">					cid:&#x27;&#x27;,        // 分类ID</span><br><span class="line">					pagenum:1,     // 当前页码</span><br><span class="line">					pagesize:10    // 每页条数</span><br><span class="line">				&#125;,</span><br><span class="line">				total:0,          // 商品总数</span><br><span class="line">				goodsList:[]      // 商品列表数据</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		// 监听上拉触底事件 - 用于加载更多数据</span><br><span class="line">		onReachBottom()&#123;</span><br><span class="line">			// 先判断是否还有数据</span><br><span class="line">			// 已加载数据 &gt;= 总数据量时停止加载</span><br><span class="line">			if(this.queryObj.pagenum * this.queryObj.pagesize &gt;= this.total)&#123;</span><br><span class="line">				uni.$showMsg(&#x27;没有更多数据了&#x27;)</span><br><span class="line">				return</span><br><span class="line">			&#125;</span><br><span class="line">			// 防止发起额外的请求 - 如果正在加载则返回</span><br><span class="line">			if(this.isloading) return</span><br><span class="line">			// 页码+1，准备加载下一页</span><br><span class="line">			this.queryObj.pagenum += 1</span><br><span class="line">			// 请求下一页数据</span><br><span class="line">			this.getGoodsList()</span><br><span class="line">		&#125;,</span><br><span class="line">		// 监听下拉刷新 - 用于刷新数据</span><br><span class="line">		onPullDownRefresh()&#123;</span><br><span class="line">			// 重置数据到初始状态</span><br><span class="line">			this.queryObj.pagenum = 1     // 页码重置为第一页</span><br><span class="line">			this.total = 0                // 总数据量清零</span><br><span class="line">			this.isloading = false       // 重置加载状态</span><br><span class="line">			this.goodsList = []          // 清空商品列表</span><br><span class="line">			// 重新请求数据，回调函数中停止下拉刷新动画</span><br><span class="line">			this.getGoodsList(() =&gt; &#123;</span><br><span class="line">				uni.stopPullDownRefresh()  // 停止下拉刷新动画</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;,</span><br><span class="line">		methods:&#123;</span><br><span class="line">			// 异步获取商品列表数据</span><br><span class="line">			// cb: 可选的回调函数，通常用于下拉刷新后停止动画</span><br><span class="line">			async getGoodsList(cb)&#123;</span><br><span class="line">				// 开始加载，设置节流阀</span><br><span class="line">				this.isloading = true</span><br><span class="line">				try &#123;</span><br><span class="line">					// 发起网络请求</span><br><span class="line">					// uni.$http.get: 封装的HTTP请求方法</span><br><span class="line">					// &#x27;/api/public/v1/goods/search&#x27;: 商品搜索API地址</span><br><span class="line">					// this.queryObj: 请求参数对象</span><br><span class="line">					const &#123;data:res&#125; = await uni.$http.get(&#x27;/api/public/v1/goods/search&#x27;, this.queryObj)</span><br><span class="line">					</span><br><span class="line">					// 请求完成，关闭加载状态</span><br><span class="line">					this.isloading = false</span><br><span class="line">					</span><br><span class="line">					// 如果传入了回调函数，则执行</span><br><span class="line">					cb &amp;&amp; cb()</span><br><span class="line">					</span><br><span class="line">					// 检查API返回状态码</span><br><span class="line">					// res.meta.status: API约定的状态码（通常200表示成功）</span><br><span class="line">					if(res.meta.status !== 200) &#123;</span><br><span class="line">						uni.$showMsg(&#x27;获取商品失败&#x27;)  // 显示错误提示</span><br><span class="line">						return</span><br><span class="line">					&#125;</span><br><span class="line">					</span><br><span class="line">					// 处理返回的商品数据</span><br><span class="line">					// 如果是第一页，直接替换数据（刷新或首次加载）</span><br><span class="line">					if(this.queryObj.pagenum === 1) &#123;</span><br><span class="line">						this.goodsList = res.message.goods</span><br><span class="line">					&#125; else &#123;</span><br><span class="line">						// 如果是加载更多，追加数据到现有列表</span><br><span class="line">						// 使用扩展运算符创建新数组，保持响应式</span><br><span class="line">						this.goodsList = [...this.goodsList, ...res.message.goods]</span><br><span class="line">					&#125;</span><br><span class="line">					</span><br><span class="line">					// 更新总数据量</span><br><span class="line">					this.total = res.message.total</span><br><span class="line">				&#125; catch(error) &#123;</span><br><span class="line">					// 请求发生异常（网络错误等）</span><br><span class="line">					this.isloading = false</span><br><span class="line">					cb &amp;&amp; cb()  // 确保回调函数执行</span><br><span class="line">					uni.$showMsg(&#x27;网络请求失败&#x27;)  // 显示网络错误提示</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			// 跳转到商品详情页</span><br><span class="line">			// item: 商品对象，包含goods_id等属性</span><br><span class="line">			gotoDetail(item)&#123;</span><br><span class="line">				// uni.navigateTo: uni-app页面跳转方法</span><br><span class="line">				// url: 目标页面路径，携带商品ID参数</span><br><span class="line">				uni.navigateTo(&#123;</span><br><span class="line">					url:&#x27;/subpkg/goods_detail/goods_detail?goods_id=&#x27; + item.goods_id</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		// 页面加载生命周期函数</span><br><span class="line">		// options: 其他页面传递过来的参数</span><br><span class="line">		onLoad(options)&#123;</span><br><span class="line">			// 从options中获取参数，设置到查询对象中</span><br><span class="line">			this.queryObj.query = options.query || &#x27;&#x27;  // 搜索关键词</span><br><span class="line">			this.queryObj.cid = options.cid || &#x27;&#x27;      // 分类ID</span><br><span class="line">			// 初始化时加载第一页数据</span><br><span class="line">			this.getGoodsList()</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.goods-list &#123;</span><br><span class="line">	padding: 0 10px;  // 左右内边距</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="subpkg-goods-detail-goods-detail-vue"><a href="#subpkg-goods-detail-goods-detail-vue" class="headerlink" title="subpkg&#x2F;goods_detail&#x2F;goods_detail.vue"></a>subpkg&#x2F;goods_detail&#x2F;goods_detail.vue</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;!-- 商品详情页面 --&gt;</span><br><span class="line">	&lt;view v-if=&quot;goods_info.goods_name&quot;&gt;</span><br><span class="line">		&lt;!-- 轮播图区域 --&gt;</span><br><span class="line">		&lt;swiper :indicator-dots=&quot;true&quot; :autoplay=&quot;true&quot; :interval=&quot;3000&quot; :duration=&quot;1000&quot; :circular=&quot;true&quot;&gt;</span><br><span class="line">			&lt;!-- 遍历商品图片数组 --&gt;</span><br><span class="line">			&lt;swiper-item v-for=&quot;(item,i) in goods_info.pics&quot; :key=&quot;i&quot;&gt;</span><br><span class="line">				&lt;!-- 商品大图，点击可预览 --&gt;</span><br><span class="line">				&lt;image :src=&quot;item.pics_big&quot; mode=&quot;&quot; @click=&quot;preview(i)&quot;&gt;&lt;/image&gt;</span><br><span class="line">			&lt;/swiper-item&gt;</span><br><span class="line">		&lt;/swiper&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- 商品基本信息区域 --&gt;</span><br><span class="line">		&lt;view class=&quot;goods-info-box&quot;&gt;</span><br><span class="line">			&lt;!-- 商品价格 --&gt;</span><br><span class="line">			&lt;view class=&quot;price&quot;&gt;￥&#123;&#123;goods_info.goods_price&#125;&#125;&lt;/view&gt;</span><br><span class="line">			&lt;view class=&quot;goods-info-body&quot;&gt;</span><br><span class="line">				&lt;!-- 商品名称 --&gt;</span><br><span class="line">				&lt;view class=&quot;goods-name&quot;&gt;&#123;&#123;goods_info.goods_name&#125;&#125;&lt;/view&gt;</span><br><span class="line">				&lt;!-- 收藏按钮 --&gt;</span><br><span class="line">				&lt;view class=&quot;favi&quot;&gt;</span><br><span class="line">					&lt;uni-icons type=&quot;star&quot; size=&quot;18&quot; color=&quot;gray&quot;&gt;&lt;/uni-icons&gt;</span><br><span class="line">					&lt;text&gt;收藏&lt;/text&gt;</span><br><span class="line">				&lt;/view&gt;</span><br><span class="line">			&lt;/view&gt;</span><br><span class="line">			&lt;!-- 运费信息（显示购物车商品数量） --&gt;</span><br><span class="line">			&lt;view class=&quot;yf&quot;&gt;运费&#123;&#123;cart.length&#125;&#125;&lt;/view&gt;</span><br><span class="line">		&lt;/view&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- 商品详情富文本区域 --&gt;</span><br><span class="line">		&lt;rich-text :nodes=&quot;goods_info.goods_introduce&quot;&gt;&lt;/rich-text&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- 底部商品导航区域 --&gt;</span><br><span class="line">		&lt;view class=&quot;goods_nav&quot;&gt;</span><br><span class="line">			&lt;!-- uni-goods-nav组件：店铺、购物车、加入购物车、立即购买 --&gt;</span><br><span class="line">			&lt;uni-goods-nav :fill=&quot;true&quot; :options=&quot;options&quot; :buttonGroup=&quot;buttonGroup&quot; @click=&quot;onClick&quot; @buttonClick=&quot;buttonClick&quot;/&gt;</span><br><span class="line">		&lt;/view&gt;</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	// 引入Vuex辅助函数</span><br><span class="line">	import &#123; mapState, mapMutations, mapGetters &#125; from &#x27;vuex&#x27;</span><br><span class="line">	</span><br><span class="line">	export default &#123;</span><br><span class="line">		data() &#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				// 商品详情数据对象</span><br><span class="line">				goods_info: &#123;&#125;,</span><br><span class="line">				// 左侧按钮的配置对象（店铺、购物车）</span><br><span class="line">				options: [&#123;</span><br><span class="line">					icon: &#x27;shop&#x27;,  // 店铺图标</span><br><span class="line">					text: &#x27;店铺&#x27;    // 店铺文字</span><br><span class="line">				&#125;, &#123;</span><br><span class="line">					icon: &#x27;cart&#x27;,  // 购物车图标</span><br><span class="line">					text: &#x27;购物车&#x27;, // 购物车文字</span><br><span class="line">					info: 0        // 购物车商品数量，初始为0</span><br><span class="line">				&#125;],</span><br><span class="line">				// 右侧按钮的配置对象</span><br><span class="line">				buttonGroup: [&#123;</span><br><span class="line">					text: &#x27;加入购物车&#x27;,        // 按钮文字</span><br><span class="line">					backgroundColor: &#x27;#ff0000&#x27;, // 按钮背景色（红色）</span><br><span class="line">					color: &#x27;#fff&#x27;              // 文字颜色（白色）</span><br><span class="line">				&#125;, &#123;</span><br><span class="line">					text: &#x27;立即购买&#x27;,          // 按钮文字</span><br><span class="line">					backgroundColor: &#x27;#ffa200&#x27;, // 按钮背景色（橙色）</span><br><span class="line">					color: &#x27;#fff&#x27;              // 文字颜色（白色）</span><br><span class="line">				&#125;]</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		methods: &#123;</span><br><span class="line">			// 映射购物车模块的addToCart方法</span><br><span class="line">			...mapMutations(&#x27;m_cart&#x27;, [&#x27;addToCart&#x27;]),</span><br><span class="line">			</span><br><span class="line">			/**</span><br><span class="line">			 * 获取商品详情数据</span><br><span class="line">			 * @param &#123;number&#125; goods_id - 商品ID</span><br><span class="line">			 */</span><br><span class="line">			async getGoodsDetail(goods_id) &#123;</span><br><span class="line">				// 发送请求获取商品详情</span><br><span class="line">				const &#123; data: res &#125; = await uni.$http.get(&#x27;/api/public/v1/goods/detail&#x27;, &#123; goods_id &#125;)</span><br><span class="line">				// 判断请求是否成功</span><br><span class="line">				if (res.meta.status !== 200) &#123;</span><br><span class="line">					return uni.$showMsg(&#x27;获取商品详情失败&#x27;)</span><br><span class="line">				&#125;</span><br><span class="line">				// 处理富文本中的图片：防止底部空白间隙，转换webp格式</span><br><span class="line">				res.message.goods_introduce = res.message.goods_introduce</span><br><span class="line">					.replace(/&lt;img /g, &#x27;&lt;img style=&quot;display:block;&quot;&#x27;)  // 设置图片为块级元素</span><br><span class="line">					.replace(/webp/g, &#x27;jpg&#x27;)                          // 将webp格式转为jpg格式</span><br><span class="line">				// 将处理后的数据赋值给goods_info</span><br><span class="line">				this.goods_info = res.message</span><br><span class="line">			&#125;,</span><br><span class="line">			</span><br><span class="line">			/**</span><br><span class="line">			 * 轮播图预览功能</span><br><span class="line">			 * @param &#123;number&#125; i - 点击的图片索引</span><br><span class="line">			 */</span><br><span class="line">			preview(i) &#123;</span><br><span class="line">				// 调用uni-app的图片预览API</span><br><span class="line">				uni.previewImage(&#123;</span><br><span class="line">					current: i,  // 预览时默认显示当前点击的图片</span><br><span class="line">					// 所有图片url的地址数组</span><br><span class="line">					urls: this.goods_info.pics.map(x =&gt; x.pics_big)</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;,</span><br><span class="line">			</span><br><span class="line">			/**</span><br><span class="line">			 * 左侧按钮点击事件</span><br><span class="line">			 * @param &#123;Object&#125; e - 事件对象</span><br><span class="line">			 */</span><br><span class="line">			onClick(e) &#123;</span><br><span class="line">				// 如果点击的是购物车按钮</span><br><span class="line">				if (e.content.text === &#x27;购物车&#x27;) &#123;</span><br><span class="line">					// 切换到购物车tab页</span><br><span class="line">					uni.switchTab(&#123;</span><br><span class="line">						url: &#x27;/pages/cart/cart&#x27;</span><br><span class="line">					&#125;)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			</span><br><span class="line">			/**</span><br><span class="line">			 * 右侧按钮点击事件</span><br><span class="line">			 * @param &#123;Object&#125; e - 事件对象</span><br><span class="line">			 */</span><br><span class="line">			buttonClick(e) &#123;</span><br><span class="line">				// 判断是否点击加入购物车按钮</span><br><span class="line">				if (e.content.text === &#x27;加入购物车&#x27;) &#123;</span><br><span class="line">					// 组织商品信息对象</span><br><span class="line">					const goods = &#123;</span><br><span class="line">						goods_id: this.goods_info.goods_id,         // 商品ID</span><br><span class="line">						goods_name: this.goods_info.goods_name,     // 商品名称</span><br><span class="line">						goods_price: this.goods_info.goods_price,   // 商品价格</span><br><span class="line">						goods_count: 1,                             // 商品数量，默认为1</span><br><span class="line">						goods_small_logo: this.goods_info.goods_small_logo, // 商品小图</span><br><span class="line">						goods_state: true,                          // 商品勾选状态，默认为true</span><br><span class="line">					&#125;</span><br><span class="line">					// 调用addToCart方法将商品加入购物车</span><br><span class="line">					this.addToCart(goods)</span><br><span class="line">					// 显示加入成功提示</span><br><span class="line">					uni.$showMsg(&#x27;已加入购物车&#x27;)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		computed: &#123;</span><br><span class="line">			// 映射购物车模块的cart状态</span><br><span class="line">			...mapState(&#x27;m_cart&#x27;, [&#x27;cart&#x27;]),</span><br><span class="line">			// 映射购物车模块的total计算属性（商品总数）</span><br><span class="line">			...mapGetters(&#x27;m_cart&#x27;, [&#x27;total&#x27;])</span><br><span class="line">		&#125;,</span><br><span class="line">		onLoad(options) &#123;</span><br><span class="line">			// 页面加载时获取传递的商品ID</span><br><span class="line">			const goods_id = options.goods_id</span><br><span class="line">			// 调用方法获取商品详情</span><br><span class="line">			this.getGoodsDetail(goods_id)</span><br><span class="line">		&#125;,</span><br><span class="line">		watch: &#123;</span><br><span class="line">			// 监听total（购物车商品总数）的变化</span><br><span class="line">			total: &#123;</span><br><span class="line">				handler(newVal) &#123;</span><br><span class="line">					// 找到购物车按钮配置项</span><br><span class="line">					const findResult = this.options.find((x) =&gt; x.text === &#x27;购物车&#x27;)</span><br><span class="line">					if (findResult) &#123;</span><br><span class="line">						// 动态更新购物车按钮的info值（角标显示数量）</span><br><span class="line">						findResult.info = newVal</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				immediate: true  // 立即执行一次，初始化角标显示</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">/* 轮播图样式 */</span><br><span class="line">swiper &#123;</span><br><span class="line">	height: 750rpx;  // 设置轮播图高度</span><br><span class="line">	image &#123;</span><br><span class="line">		width: 100%;   // 图片宽度100%</span><br><span class="line">		height: 100%;  // 图片高度100%</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 商品信息区域样式 */</span><br><span class="line">.goods-info-box &#123;</span><br><span class="line">	padding: 10px;</span><br><span class="line">	padding-right: 0;</span><br><span class="line">	.price &#123;</span><br><span class="line">		color: #c00000;  // 价格文字颜色（红色）</span><br><span class="line">		font-size: 18px; // 价格字体大小</span><br><span class="line">		margin: 10px 0;  // 上下边距</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 商品信息主体样式 */</span><br><span class="line">.goods-info-body &#123;</span><br><span class="line">	display: flex;           // 弹性布局</span><br><span class="line">	justify-content: space-between; // 两端对齐</span><br><span class="line">	.goods-name &#123;</span><br><span class="line">		font-size: 13px; // 商品名称字体大小</span><br><span class="line">	&#125;</span><br><span class="line">	.favi &#123;</span><br><span class="line">		font-size: 12px;                 // 收藏文字字体大小</span><br><span class="line">		display: flex;                   // 弹性布局</span><br><span class="line">		flex-direction: column;          // 垂直排列</span><br><span class="line">		align-items: center;             // 水平居中</span><br><span class="line">		justify-content: center;         // 垂直居中</span><br><span class="line">		border-left: 1px solid #efefef;  // 左侧边框（分隔线）</span><br><span class="line">		color: gray;                     // 文字颜色（灰色）</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 运费样式 */</span><br><span class="line">.yf &#123;</span><br><span class="line">	margin: 10px 0;    // 上下边距</span><br><span class="line">	color: gray;       // 文字颜色（灰色）</span><br><span class="line">	font-size: 12px;   // 字体大小</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 商品详情容器样式 */</span><br><span class="line">.goods-detail-conteiner &#123;</span><br><span class="line">	padding-bottom: 50px; // 底部内边距，为底部导航预留空间</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 商品导航区域样式 */</span><br><span class="line">.goods_nav &#123;</span><br><span class="line">	position: fixed;  // 固定定位</span><br><span class="line">	bottom: 0;        // 固定在底部</span><br><span class="line">	left: 0;          // 左对齐</span><br><span class="line">	width: 100%;      // 宽度100%</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="cart页面"><a href="#cart页面" class="headerlink" title="cart页面"></a>cart页面</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;view class=&quot;cart-title&quot;&gt;</span><br><span class="line">		&lt;!-- 购物车标题区域 --&gt;</span><br><span class="line">		&lt;uni-icons type=&quot;shop&quot; size=&quot;18&quot;&gt;&lt;/uni-icons&gt;</span><br><span class="line">		&lt;text class=&quot;cart-title-text&quot;&gt;购物车&lt;/text&gt;</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 商品列表区域，使用uni-swipe-action组件实现侧滑删除功能 --&gt;</span><br><span class="line">	&lt;uni-swipe-action&gt;</span><br><span class="line">		&lt;!-- 遍历购物车中的商品列表 --&gt;</span><br><span class="line">		&lt;block v-for=&quot;(goods,i) in cart&quot; :key=&quot;i&quot;&gt;</span><br><span class="line">			&lt;!-- 每个商品项都包裹在uni-swipe-action-item中，实现侧滑删除 --&gt;</span><br><span class="line">			&lt;uni-swipe-action-item :options=&quot;options&quot; @click=&quot;swipeActionClickHandler(goods)&quot;&gt;</span><br><span class="line">				&lt;!-- 使用自定义的my-goods组件展示商品信息 --&gt;</span><br><span class="line">				&lt;my-goods </span><br><span class="line">					:goods=&quot;goods&quot; </span><br><span class="line">					:show-radio=&quot;true&quot; </span><br><span class="line">					:show-num=&quot;true&quot; </span><br><span class="line">					@radio-change=&quot;radioChangeHandler&quot; </span><br><span class="line">					@num-change=&quot;numberChangeHandler&quot;&gt;</span><br><span class="line">				&lt;/my-goods&gt;</span><br><span class="line">			&lt;/uni-swipe-action-item&gt;	</span><br><span class="line">		&lt;/block&gt;</span><br><span class="line">	&lt;/uni-swipe-action&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	// 引入Vuex辅助函数</span><br><span class="line">	import &#123; mapState, mapMutations &#125; from &#x27;vuex&#x27;</span><br><span class="line">	// 引入tabbar徽章混入</span><br><span class="line">	import badgeMix from &#x27;@/mixins/tabbar-badge.js&#x27;</span><br><span class="line">	</span><br><span class="line">	export default &#123;</span><br><span class="line">		data() &#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				// 滑动删除按钮配置信息</span><br><span class="line">				options: [&#123;</span><br><span class="line">					text: &#x27;删除&#x27;,         // 按钮显示的文本</span><br><span class="line">					style: &#123;              // 按钮样式配置</span><br><span class="line">						backgroundColor: &#x27;#c00000&#x27;  // 按钮背景色（红色）</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;]</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		// 使用混入（mixin）添加tabbar徽章功能</span><br><span class="line">		mixins: [badgeMix],</span><br><span class="line">		computed: &#123;</span><br><span class="line">			// 映射购物车模块的cart状态（购物车商品列表）</span><br><span class="line">			...mapState(&#x27;m_cart&#x27;, [&#x27;cart&#x27;]),</span><br><span class="line">		&#125;,</span><br><span class="line">			</span><br><span class="line">		methods: &#123;</span><br><span class="line">			// 映射购物车模块的mutations方法</span><br><span class="line">			...mapMutations(&#x27;m_cart&#x27;, [&#x27;updateGoodsState&#x27;, &#x27;updateGoodsCount&#x27;, &#x27;removeGoodsById&#x27;]),</span><br><span class="line">			</span><br><span class="line">			/**</span><br><span class="line">			 * 商品单选按钮状态变化事件处理</span><br><span class="line">			 * @param &#123;Object&#125; e - 事件对象，包含商品ID和选中状态</span><br><span class="line">			 */</span><br><span class="line">			radioChangeHandler(e) &#123;</span><br><span class="line">				// 调用updateGoodsState方法更新商品选中状态</span><br><span class="line">				this.updateGoodsState(e)</span><br><span class="line">			&#125;,</span><br><span class="line">			</span><br><span class="line">			/**</span><br><span class="line">			 * 商品数量变化事件处理</span><br><span class="line">			 * @param &#123;Object&#125; e - 事件对象，包含商品ID和新的数量</span><br><span class="line">			 */</span><br><span class="line">			numberChangeHandler(e) &#123;</span><br><span class="line">				// 调用updateGoodsCount方法更新商品数量</span><br><span class="line">				this.updateGoodsCount(e)</span><br><span class="line">			&#125;,</span><br><span class="line">			</span><br><span class="line">			/**</span><br><span class="line">			 * 滑动删除按钮点击事件处理</span><br><span class="line">			 * @param &#123;Object&#125; goods - 要删除的商品对象</span><br><span class="line">			 */</span><br><span class="line">			swipeActionClickHandler(goods) &#123;</span><br><span class="line">				// 调用removeGoodsById方法根据商品ID删除商品</span><br><span class="line">				this.removeGoodsById(goods.goods_id)</span><br><span class="line">			&#125;,</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">/* 购物车标题样式 */</span><br><span class="line">.cart-title &#123;</span><br><span class="line">	height: 40px;               // 固定高度</span><br><span class="line">	display: flex;              // 弹性布局</span><br><span class="line">	align-items: center;        // 垂直居中</span><br><span class="line">	font-size: 14px;            // 字体大小</span><br><span class="line">	padding-left: 5px;          // 左侧内边距</span><br><span class="line">	border-bottom: 1px solid #efefef;  // 底部边框（分割线）</span><br><span class="line">	.cart-title-text &#123;</span><br><span class="line">		margin-left: 10px;      // 文字左侧外边距</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="store-cart-js-购物车状态管理模块"><a href="#store-cart-js-购物车状态管理模块" class="headerlink" title="store&#x2F;cart.js - 购物车状态管理模块"></a>store&#x2F;cart.js - 购物车状态管理模块</h2><p>作用：<br>管理购物车相关的所有状态和数据<br>提供购物车商品增删改查的功能<br>实现购物车数据的本地持久化存储<br>核心功能：<br>存储购物车商品列表：每个商品包含ID、名称、价格、数量、图片、选中状态<br>添加商品到购物车：支持新商品添加和已有商品数量增加<br>更新商品状态：修改商品的选中&#x2F;取消选中状态<br>更新商品数量：修改购物车中商品的数量<br>删除商品：从购物车中移除指定商品<br>计算商品总数：统计购物车中所有商品的总数量<br>数据持久化：自动将购物车数据保存到本地存储</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  // 为当前模块开启命名空间</span><br><span class="line">  namespaced: true,</span><br><span class="line">  </span><br><span class="line">  // 模块的state数据</span><br><span class="line">  state: () =&gt; (&#123;</span><br><span class="line">    // 存储每个商品的信息对象&#123;goods_id,goods_name,goods_count,goods_small_logo,goods_state&#125;</span><br><span class="line">    cart: JSON.parse(uni.getStorageSync(&#x27;cart&#x27;) || &#x27;[]&#x27;)</span><br><span class="line">  &#125;),</span><br><span class="line">  </span><br><span class="line">  // 方法</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    addToCart(state, goods) &#123;</span><br><span class="line">      // 根据提交的商品id，查询购物车是否存在这件商品</span><br><span class="line">      // 如果不存在，则findResult为undefined，否则为查找到的商品信息对象</span><br><span class="line">      const findResult = state.cart.find((x) =&gt; x.goods_id === goods.goods_id)</span><br><span class="line">      </span><br><span class="line">      if (!findResult) &#123;</span><br><span class="line">        // 如果购物车里没有这件商品，直接push</span><br><span class="line">        state.cart.push(goods)</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        // 如果购物车中有这件商品，则只更新数量</span><br><span class="line">        findResult.goods_count++</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      // 通过commit方法，调用m_cart命名空间下的saveToStorage方法</span><br><span class="line">      this.commit(&#x27;m_cart/saveToStorage&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    // 购物车数据持久化存储到本地</span><br><span class="line">    saveToStorage(state) &#123;</span><br><span class="line">      uni.setStorageSync(&#x27;cart&#x27;, JSON.stringify(state.cart))</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    updateGoodsState(state, goods) &#123;</span><br><span class="line">      // 根据商品ID查找商品</span><br><span class="line">      const findResult = state.cart.find(x =&gt; x.goods_id === goods.goods_id)</span><br><span class="line">      </span><br><span class="line">      if (findResult) &#123;</span><br><span class="line">        // 更新对应商品的勾选状态</span><br><span class="line">        findResult.goods_state = goods.goods_state</span><br><span class="line">        </span><br><span class="line">        // 持久化存储到本地</span><br><span class="line">        this.commit(&#x27;m_cart/saveToStorage&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    // 更新购物车的商品数量</span><br><span class="line">    updateGoodsCount(state, goods) &#123;</span><br><span class="line">      const findResult = state.cart.find(x =&gt; x.goods_id === goods.goods_id)</span><br><span class="line">      </span><br><span class="line">      if (findResult) &#123;</span><br><span class="line">        // 更新对应商品的数量</span><br><span class="line">        findResult.goods_count = goods.goods_count</span><br><span class="line">        </span><br><span class="line">        // 持久化存储到本地</span><br><span class="line">        this.commit(&#x27;m_cart/saveToStorage&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    // 删除商品</span><br><span class="line">    removeGoodsById(state, goods_id) &#123;</span><br><span class="line">      // filter过滤</span><br><span class="line">      state.cart = state.cart.filter(x =&gt; x.goods_id !== goods_id)</span><br><span class="line">      </span><br><span class="line">      // 持久化存储到本地</span><br><span class="line">      this.commit(&#x27;m_cart/saveToStorage&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  // 属性</span><br><span class="line">  getters: &#123;</span><br><span class="line">    // 统计购物车商品的总数量</span><br><span class="line">    total(state) &#123;</span><br><span class="line">      let c = 0</span><br><span class="line">      </span><br><span class="line">      // 循环统计商品的数量</span><br><span class="line">      state.cart.forEach(goods =&gt; c += goods.goods_count)</span><br><span class="line">      </span><br><span class="line">      return c</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="store-user-js-用户状态管理模块"><a href="#store-user-js-用户状态管理模块" class="headerlink" title="store&#x2F;user.js - 用户状态管理模块"></a>store&#x2F;user.js - 用户状态管理模块</h2><p>作用：<br>管理用户相关的状态和数据<br>主要用于管理收货地址信息<br>核心功能：<br>存储用户收货地址：包含省、市、区、详细地址等信息<br>更新收货地址：修改或新增收货地址<br>生成地址字符串：将地址各部分拼接成完整的地址字符串<br>数据持久化：自动将收货地址保存到本地存储</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  // 开启命名空间</span><br><span class="line">  namespaced: true,</span><br><span class="line">  </span><br><span class="line">  state: () =&gt; (&#123;</span><br><span class="line">    // 读取本地收货地址数据，初始化address对象</span><br><span class="line">    address: JSON.parse(uni.getStorageSync(&#x27;address&#x27;) || &#x27;&#123;&#125;&#x27;)</span><br><span class="line">  &#125;),</span><br><span class="line">  </span><br><span class="line">  // 方法</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    // 更新收货地址</span><br><span class="line">    updateAddress(state, address) &#123;</span><br><span class="line">      state.address = address</span><br><span class="line">      </span><br><span class="line">      // 通过this.commit()方法，调用m_user下的saveAddressToStorage方法将address持久化存储本地</span><br><span class="line">      this.commit(&#x27;m_user/saveAddressToStorage&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    // 定义将address持久化存储到本地的mutations方法</span><br><span class="line">    saveAddressToStorage(state) &#123;</span><br><span class="line">      uni.setStorageSync(&#x27;address&#x27;, JSON.stringify(state.address))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  getters: &#123;</span><br><span class="line">    // 计算完整的收货地址字符串</span><br><span class="line">    addstr(state) &#123;</span><br><span class="line">      if (!state.address.provinceName) return &#x27;&#x27;</span><br><span class="line">      </span><br><span class="line">      return state.address.provinceName + </span><br><span class="line">             state.address.cityName + </span><br><span class="line">             state.address.countyName + </span><br><span class="line">             state.address.detailInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="store-store-js-Vuex-主配置文件"><a href="#store-store-js-Vuex-主配置文件" class="headerlink" title="store&#x2F;store.js - Vuex 主配置文件"></a>store&#x2F;store.js - Vuex 主配置文件</h2><p>作用：<br>Vuex 的入口文件和配置中心<br>整合所有模块并创建 Vuex 实例<br>核心功能：<br>导入 Vue 和 Vuex：初始化 Vuex<br>导入所有模块：引入 cart.js 和 user.js 模块<br>配置模块命名空间：<br>m_cart：购物车模块<br>m_user：用户模块<br>创建并导出 Vuex Store 实例：供整个应用使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import Vuex from &#x27;vuex&#x27;</span><br><span class="line">import moduleUser from &#x27;./user.js&#x27;</span><br><span class="line">import moduleCart from &#x27;./cart.js&#x27;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line">const store = new Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    m_user: moduleUser,</span><br><span class="line">    m_cart: moduleCart,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">export default store</span><br></pre></td></tr></table></figure>

<h2 id="mixins-tabbar-badge-js"><a href="#mixins-tabbar-badge-js" class="headerlink" title="mixins&#x2F;tabbar-badge.js"></a>mixins&#x2F;tabbar-badge.js</h2><p>Vue混入（mixin）文件，用于为页面添加购物车TabBar徽章功能<br>主要实现在购物车TabBar图标上显示商品数量的角标</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">// mixins/tabbar-badge.js</span><br><span class="line"></span><br><span class="line">import &#123; mapGetters &#125; from &#x27;vuex&#x27;</span><br><span class="line"></span><br><span class="line">// 导出一个mixin对象</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  computed: &#123;</span><br><span class="line">    // 将m_cart中的total映射为当前页面的计算属性</span><br><span class="line">    ...mapGetters(&#x27;m_cart&#x27;, [&#x27;total&#x27;])</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  watch: &#123;</span><br><span class="line">    // 监听total变化，自动更新徽章</span><br><span class="line">    total() &#123;</span><br><span class="line">      this.setBadge()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  onShow() &#123;</span><br><span class="line">    // 页面显示时设置徽章</span><br><span class="line">    this.setBadge()</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  methods: &#123;</span><br><span class="line">    setBadge() &#123;</span><br><span class="line">      // 如果total为0，不显示徽章（或清除徽章）</span><br><span class="line">      if (!this.total || this.total === 0) &#123;</span><br><span class="line">        // 清除徽章</span><br><span class="line">        uni.removeTabBarBadge(&#123;</span><br><span class="line">          index: 2 // 请根据实际情况调整索引</span><br><span class="line">        &#125;)</span><br><span class="line">        return</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      // 设置右上角徽章</span><br><span class="line">      uni.setTabBarBadge(&#123;</span><br><span class="line">        index: 2, // 索引（请根据实际情况调整，通常是购物车tab的索引）</span><br><span class="line">        text: this.total.toString(), // text必须是字符串</span><br><span class="line">        fail: (err) =&gt; &#123;</span><br><span class="line">          console.error(&#x27;设置tabbar徽章失败:&#x27;, err)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="创建components-my-address-my-address-vue"><a href="#创建components-my-address-my-address-vue" class="headerlink" title="创建components&#x2F;my-address&#x2F;my-address.vue"></a>创建components&#x2F;my-address&#x2F;my-address.vue</h2></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://msh-18751628429.github.io/project">Msh</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://msh-18751628429.github.io/project/2026/02/17/uniapp-pj/">https://msh-18751628429.github.io/project/2026/02/17/uniapp-pj/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://msh-18751628429.github.io/project" target="_blank">MShBlog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/project/tags/%E7%AC%94%E8%AE%B0/">笔记</a><a class="post-meta__tags" href="/project/tags/uniapp/">uniapp</a><a class="post-meta__tags" href="/project/tags/vue/">vue</a></div><div class="post-share"><div class="social-share" data-image="/project/images/cover.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related  no-desc" href="/project/2026/02/18/echarts%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E9%A1%B9/" title=""><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2"></div></div></div></a><a class="pagination-related" href="/project/2026/02/16/%E5%9F%BA%E7%A1%80/" title="无~~"><img class="cover" src="/project/images/cover.jpg" onerror="onerror=null;src='/project/images/error/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">无~~</div></div><div class="info-2"><div class="info-item-1">文字居中：text-align:center;宽度自适应 居左显示:float:left;width:auto; 水果拼盘12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;!-- 水果拼盘 --&gt;&lt;div id=&quot;board&quot;&gt;		&lt;div id=&quot;pond&quot;&gt;			&lt;div class=&quot;frog yellow&quot;&gt;				&lt;div class=&quot;bg animated pulse infinite&quot;&gt;&lt;/div&gt;			&lt;/div&gt;			&lt;div class=&quot;frog green&quot;&gt;				&lt;div class=&quot;bg animated pulse infinite&quot;&gt...</div></div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/project/images/avatar.jpg" onerror="this.onerror=null;this.src='/project/images/error/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Msh</div><div class="author-info-description">这是一个关于编程、技术和生活的个人博客</div><div class="site-data"><a href="/project/archives/"><div class="headline">文章</div><div class="length-num">5</div></a><a href="/project/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/project/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/msh-18751628429"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#uniapp-%E8%B4%AD%E7%89%A9%E5%B0%8F%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.</span> <span class="toc-text">uniapp-购物小程序</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BAuniapp%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.1.</span> <span class="toc-text">一、创建uniapp项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E9%85%8D%E7%BD%AE-HTTP-%E8%AF%B7%E6%B1%82%E5%BA%93"><span class="toc-number">1.2.</span> <span class="toc-text">二、配置 HTTP 请求库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%88%9B%E5%BB%BAtabBar%E9%A1%B5%E9%9D%A2%E5%B9%B6%E6%8F%90%E4%BA%A4%E5%88%B0%E4%BB%93%E5%BA%93"><span class="toc-number">1.3.</span> <span class="toc-text">三、创建tabBar页面并提交到仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%90%9C%E7%B4%A2%E7%BB%84%E4%BB%B6components-my-search-my-search-vue"><span class="toc-number">1.4.</span> <span class="toc-text">自定义搜索组件components&#x2F;my-search&#x2F;my-search.vue</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E9%A1%B5%E9%9D%A2"><span class="toc-number">1.5.</span> <span class="toc-text">搜索页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#home%E9%A1%B5%E9%9D%A2"><span class="toc-number">1.6.</span> <span class="toc-text">home页面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAhome%E5%88%86%E6%94%AF%E6%8F%90%E4%BA%A4%E5%88%B0%E4%BB%93%E5%BA%93-%E5%90%8Ctabbar"><span class="toc-number">1.6.1.</span> <span class="toc-text">创建home分支提交到仓库(同tabbar)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cate%E9%A1%B5%E9%9D%A2"><span class="toc-number">1.7.</span> <span class="toc-text">cate页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAcomponents-my-goods-my-goods-vue"><span class="toc-number">1.8.</span> <span class="toc-text">创建components&#x2F;my-goods&#x2F;my-goods.vue</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#subpkg-goods-list-goods-list-vue"><span class="toc-number">1.9.</span> <span class="toc-text">subpkg&#x2F;goods_list&#x2F;goods_list.vue</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#subpkg-goods-detail-goods-detail-vue"><span class="toc-number">1.10.</span> <span class="toc-text">subpkg&#x2F;goods_detail&#x2F;goods_detail.vue</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cart%E9%A1%B5%E9%9D%A2"><span class="toc-number">1.11.</span> <span class="toc-text">cart页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#store-cart-js-%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="toc-number">1.12.</span> <span class="toc-text">store&#x2F;cart.js - 购物车状态管理模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#store-user-js-%E7%94%A8%E6%88%B7%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="toc-number">1.13.</span> <span class="toc-text">store&#x2F;user.js - 用户状态管理模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#store-store-js-Vuex-%E4%B8%BB%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.14.</span> <span class="toc-text">store&#x2F;store.js - Vuex 主配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mixins-tabbar-badge-js"><span class="toc-number">1.15.</span> <span class="toc-text">mixins&#x2F;tabbar-badge.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAcomponents-my-address-my-address-vue"><span class="toc-number">1.16.</span> <span class="toc-text">创建components&#x2F;my-address&#x2F;my-address.vue</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/project/2026/02/22/js%E7%9B%B8%E5%85%B3%E9%A2%98%E7%9B%AE/" title="js相关题目"><img src="/project/images/cover.jpg" onerror="this.onerror=null;this.src='/project/images/error/404.jpg'" alt="js相关题目"/></a><div class="content"><a class="title" href="/project/2026/02/22/js%E7%9B%B8%E5%85%B3%E9%A2%98%E7%9B%AE/" title="js相关题目">js相关题目</a><time datetime="2026-02-22T08:48:54.000Z" title="发表于 2026-02-22 16:48:54">2026-02-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/project/2026/02/18/echarts%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E9%A1%B9/" title="无标题">无标题</a><time datetime="2026-02-18T11:16:02.778Z" title="发表于 2026-02-18 19:16:02">2026-02-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/project/2026/02/17/uniapp-pj/" title="uniapp pj"><img src="/project/images/cover.jpg" onerror="this.onerror=null;this.src='/project/images/error/404.jpg'" alt="uniapp pj"/></a><div class="content"><a class="title" href="/project/2026/02/17/uniapp-pj/" title="uniapp pj">uniapp pj</a><time datetime="2026-02-17T11:20:20.000Z" title="发表于 2026-02-17 19:20:20">2026-02-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/project/2026/02/16/%E5%9F%BA%E7%A1%80/" title="无~~"><img src="/project/images/cover.jpg" onerror="this.onerror=null;this.src='/project/images/error/404.jpg'" alt="无~~"/></a><div class="content"><a class="title" href="/project/2026/02/16/%E5%9F%BA%E7%A1%80/" title="无~~">无~~</a><time datetime="2026-02-16T07:50:50.000Z" title="发表于 2026-02-16 15:50:50">2026-02-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/project/2026/02/03/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/" title="我的第一篇文章"><img src="/project/images/cover.jpg" onerror="this.onerror=null;this.src='/project/images/error/404.jpg'" alt="我的第一篇文章"/></a><div class="content"><a class="title" href="/project/2026/02/03/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/" title="我的第一篇文章">我的第一篇文章</a><time datetime="2026-02-03T03:00:54.000Z" title="发表于 2026-02-03 11:00:54">2026-02-03</time></div></div></div></div></div></div></main><footer id="footer" style="background: [object Object];"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By Msh</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.4</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/project/js/utils.js?v=5.5.4"></script><script src="/project/js/main.js?v=5.5.4"></script><div class="js-pjax"><script>(() => {
  let initFn = window.walineFn || null
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const destroyWaline = ele => ele.destroy()

  const initWaline = (Fn, el = document, path = window.location.pathname) => {
    const waline = Fn({
      el: el.querySelector('#waline-wrap'),
      serverURL: 'https://your-domain.com',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      comment: false,
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    if (isShuoshuo) {
      window.shuoshuoComment.destroyWaline = () => {
        destroyWaline(waline)
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const loadWaline = (el, path) => {
    if (initFn) initWaline(initFn, el, path)
    else {
      btf.getCSS('https://cdn.jsdelivr.net/npm/@waline/client@3.8.0/dist/waline.min.css')
        .then(() => import('https://cdn.jsdelivr.net/npm/@waline/client@3.8.0/dist/waline.min.js'))
        .then(({ init }) => {
          initFn = init || Waline.init
          initWaline(initFn, el, path)
          window.walineFn = initFn
        })
    }
  }

  if (isShuoshuo) {
    'Waline' === 'Waline'
      ? window.shuoshuoComment = { loadComment: loadWaline } 
      : window.loadOtherComment = loadWaline
    return
  }

  if ('Waline' === 'Waline' || !false) {
    if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script></div><script async data-pjax src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>